<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_2_3_">2.3 Застосування</h2>
<div class="sectionbody">
<div class="paragraph"><p>Об'єкт застосування енкапсулює контекст виконання, в якому виконується запит. Головне завдання є зібрати деяку базову інформацію щодо запиту, та перестати її в відповідний контролер для подальшої обробки. Він також служить як центральне місце для утримання налаштувань конфігурації рівня застосування. З цієї причини об'єкт застосування також називають <code>front-controller</code>.</p></div>
<div class="paragraph"><p>Об'єкт застосування створюється як синглтон вхідним скриптом. Застосування-синглтон доступний в кожній точці коду через <code>Yii::app()</code>.</p></div>
<div class="sect2">
<h3 id="_2_3_1__">2.3.1 Конфігурація застосування</h3>
<div class="paragraph"><p>По замовчанню об'єкт застосування є примірником <code>CWebApplication</code>. Щоб налаштувати його, ми зазвичай провадимо файл налаштувань (або масив), щоб ініціалізувати значеннями його властивості під час створення. Альтернативним шляхом налаштування є розщирення <code>CWebApplication</code>.</p></div>
<div class="paragraph"><p>Конфігурація є масивом пар ключ-значення. Кожний ключ представляє ім'я властивості примірника застосування, та кожне значення є початкове значення відповідної властивості. Наприклад, настуий масив конфігурації встановлює властивості застосування <code>name</code> та <code>defaultController</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">array(</span>
<span class="x">  ’name’=&gt;’Yii Framework’,</span>
<span class="x">  ’defaultController’=&gt;’site’,</span>
<span class="x">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Зауважте, що застосування є компонентом, як майже всі класи Yii. Це означає дві речі:</p></div>
<div class="ulist"><ul>
<li>
<p>
Ви не можете встановлювати довільні властивості, як зі звичайними PHP об'єктами. Властивість має бути визначена в класі застосування.
</p>
</li>
<li>
<p>
Застосування підтримує сеттери для визначення властивості, так що ви можете, наприклад, встановити властивість, визначену методом <code>setImport</code>, наступним чином:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">array(</span>
<span class="x">  ’import’=&gt;array(</span>
<span class="x">    ’application.components.*’,</span>
<span class="x">  ),</span>
<span class="x">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Звичайно ми зберігаємо конфігурацію в окремому скрипті PHP (<code>protected/config/main.php</code>). В скрипті ми повертаємо масив конфігурації наступним чином:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">  return array(...);</span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб застосувати конфігурацію, ми передаємо ім'я файла конфігурації, як параметр до конструктора застосування, або до <code>Yii::createWebApplication()</code>, в наступний спосіб, зазвичай у вхідному скрипті:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">$app=Yii::createWebApplication($configFile);</span>
</pre></div></div></div>
<div class="paragraph"><p><strong>Підказка:</strong> якщо конфігурація дуже складна, ми можемо поділити її на декілька файлів, де кожний повертає частину масиву конфігурації. Потім, в головному файлі конфігурації, ми можемо викликати PHP <code>include()</code> для вставки решти файлів конфігурації, та поєднання їх в повний масив конфігурації.</p></div>
</div>
<div class="sect2">
<h3 id="_2_3_2___">2.3.2 Базова директорія застосування</h3>
<div class="paragraph"><p>Базова директорія є кореневою директорією, під якою знаходяться всі чутливі скрипти та дані PHP. По замовчанню це суб-директорія на ім'я <code>protected</code>, що знаходиться під директорією, що містить вхідний скрипт. Це можна налаштувати, встановивши влативість <code>basePath</code> в конфігурації налаштування.</p></div>
<div class="paragraph"><p>Вміст базової директорії застосування має бути захищене від доступу з боку web користувачів. Для HTTP сервера <code>Apache</code> це можна легко зробити, поклавши файл <code>.htaccess</code> в цю директорію. Вміст цього файла має бути наступним:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">deny from all</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="__">Компоненти застосування</h3>
<div class="paragraph"><p>Функціональність об'єкту застосування може бути легко налаштована та підсилена, використовуючи його компонентну архитектуру. Об'єкт керує набором компонент, кожен з яких реалізує певну можливість. Наприклад, він виконує деяку початкову обробку користувацького запиту за допомогою компонент <code>CUrlManager</code> та <code>CHttpRequest</code>.</p></div>
<div class="paragraph"><p>Конфігуруючи властивість <code>components</code> примірника застосування ми можемо налаштувати клас та значення властивостей, які використовує кожний компонент застосування. Наприклад, ми можемо сконфігурувати компонент <code>CMemCache</code>, так щоб він міг використовувати для кешування декілька memcache серверів, таким чином:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">array(</span>
<span class="x">  ...</span>
<span class="x">  ’components’=&gt;array(</span>
<span class="x">    ...</span>
<span class="x">    ’cache’=&gt;array(</span>
<span class="x">      ’class’=&gt;’CMemCache’,</span>
<span class="x">      ’servers’=&gt;array(</span>
<span class="x">        array(’host’=&gt;’server1’, ’port’=&gt;11211, ’weight’=&gt;60),</span>
<span class="x">        array(’host’=&gt;’server2’, ’port’=&gt;11211, ’weight’=&gt;40),</span>
<span class="x">      ),</span>
<span class="x">    ),</span>
<span class="x">  ),</span>
<span class="x">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Тут ми додаємо елемент <code>cache</code> до масиву <code>components</code>. Елемент <code>cache</code> стверджує, що клас компонента є <code>CMemCache</code>, та його властивість <code>servers</code> повинна бути ініціалізована певним чином.</p></div>
<div class="paragraph"><p>Для отримання доступу до компоненту застосування використовуйте <code>Yii::app()-&gt;ComponentID</code>, де <code>ComponentID</code> посилається на <code>ID</code> компонента (тобто, <code>Yii::app()-&gt;cache</code>).</p></div>
<div class="paragraph"><p>Компонент застосування може бути відключений встановленням <code>enabled</code> в <code>false</code> в його конфігурації. Коли ми отримуємо доступ до відключеного компоненту, повертається <code>Null</code>.</p></div>
<div class="paragraph"><p><strong>Підказка:</strong> по замовчанню компоненти створюються на вимогу. Це означає, що компонент застосування може бути взагалі не створений, якщо до нього нема доступу на протязі запиту користувача. Як результат, загальна продуктивність може не деградувати, навіть якщо застосування зконфігуроване з багатьма компонентами. Деякі компоненти застосування (як <code>CLogRouter</code>) мають бути зконфігуровані незалежно від того, чи отримують вони доступ. Щоб зробити це, перелічіть їх <code>ID</code> у властивості застосування <code>preload</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_2_3_4___">2.3.4 Основні компоненти застосування</h3>
<div class="paragraph"><p>Yii передвизначає набір основних компонент застосування, що провадять можливості, загальні для web застосувань. Наприклад, компонент <code>request</code> використовується для збирання інформації про запит користувача, і провадить інформацію, таку як запитаний <code>URL</code> та кукі. Конфігуруючи властивості ціх ключових компонент, ми можемо змінити поведінку по замовчанню майже кожного аспекту Yii.</p></div>
<div class="paragraph"><p>Ось список компонент, що передвизначені для <code>CWebApplication</code>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>assertManager:CAssertManager</code> - керує публікацією приватних файлів ассетів.
</p>
</li>
<li>
<p>
<code>authManager:CAuthManager</code> - керує роле-базованим контролем доступу (RBAC).
</p>
</li>
<li>
<p>
<code>cache:CCache</code> - провадить функціональність кешування даних. Зауважте, що ви маєте вказати справжній клас (як <code>CMemCache, CDbCache</code>). Інакше при доступі до цього компонента буде повертатись <code>null</code>.
</p>
</li>
<li>
<p>
<code>clientScript:CClientScript</code> - керує клієнтськими скриптами (javascript та CSS).
</p>
</li>
<li>
<p>
<code>coreMessages:CPhpMessageSource</code> - провадить переклади головних повідомлень, що використовуються фреймворком Yii.
</p>
</li>
<li>
<p>
<code>db:CDbConnection</code> - провадить з'єднання з базою даних. Зауважте, що ви маєте зконфігурувати його властивість <code>connectionString</code>, щоб використовувати цей компонент.
</p>
</li>
<li>
<p>
<code>errorHandler:CErrorHandler</code> - обробляє неперехоплені помилки та виключення PHP.
</p>
</li>
<li>
<p>
<code>format:CFormatter</code> - форматує значення даних для відображення.
</p>
</li>
<li>
<p>
<code>messages:CPhpMessageSource</code> - провадить перекладені повідомлення, що використовуються в Yii застосуванні.
</p>
</li>
<li>
<p>
<code>request:CHttpRequest</code> - провадить інформацію щодо користувацького запиту.
</p>
</li>
<li>
<p>
<code>securityManager:CSecurityManager</code> - провадить безпеко-пов'язані сервіси, такі як хешування та шифрування.
</p>
</li>
<li>
<p>
<code>session:CHttpSession</code> - провадить сессія-пов'язану функціональність.
</p>
</li>
<li>
<p>
<code>statePersister:CStatePersister</code> - провадить механізм для збереження глобального стану.
</p>
</li>
<li>
<p>
<code>urlManager:CUrlManager</code> - провадить функціонал для парсингу та створення URL.
</p>
</li>
<li>
<p>
<code>user:CWebUser</code> - несе пов'язану з ідентичністю інформацію щодо поточного користувача.
</p>
</li>
<li>
<p>
<code>themeManager:CThemeManager</code> - керує схемами.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_2_3_5___">2.3.5 Життєвий цикл застосування</h3>
<div class="paragraph"><p>Коли обробляється запит користувача, застосування проходитиме наступний життєвий цикл:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Попередня ініціалізація застосування в <code>CApplication::preinit</code>;
</p>
</li>
<li>
<p>
Встановлення обробки помилок;
</p>
</li>
<li>
<p>
Реєстрація головних компонент застосування;
</p>
</li>
<li>
<p>
Завантаження конфігурації застосування;
</p>
</li>
<li>
<p>
Ініціалізація застосування за допомогою <code>CApplication:init()</code>
</p>
<div class="ulist"><ul>
<li>
<p>
Реєстрація поведінок застосування;
</p>
</li>
<li>
<p>
Завантаження статичних компонент застосування;
</p>
</li>
</ul></div>
</li>
<li>
<p>
Підіймання події <code>onBeginRequest</code>;
</p>
</li>
<li>
<p>
Обробка користувацького запиту:
</p>
<div class="ulist"><ul>
<li>
<p>
Збір інформації щодо запиту;
</p>
</li>
<li>
<p>
Створення контролеру;
</p>
</li>
<li>
<p>
Виконання контролеру;
</p>
</li>
</ul></div>
</li>
<li>
<p>
Підіймання події <code>onEndRequest</code>;
</p>
</li>
</ol></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_4_">2.4 Контролер</h2>
<div class="sectionbody">
<div class="paragraph"><p><code>controler</code> є примірником <code>CController</code>, або класу, що розширює <code>CController</code>. Він створюється об'єктом застосування, коли користувач запитує його. Коли контролер виконується, він виконує запитувану дію, що зазвичай отримує потрібні моделі, та рендерить відповідне вью. Дія <code>action</code>, в простішій формі, є просто методом класу контролера, чиє ім'я починається з <code>action</code>.</p></div>
<div class="paragraph"><p>Контролер має дію по замовчанню. Коли запит користувача не вказує, яку дію треба виконати, буде виконана дія по замовчанню. По замовчанню, дія по замовчанню має ім'я <code>index</code>. Це може бути змінено через налаштування публічної змінної примірника, <code>CController::defaultAction</code>.</p></div>
<div class="paragraph"><p>Наступний код визначає контролер <code>site</code>, дію <code>index</code> (дія по замовчанню), та дію <code>contact</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class SiteController extends CController</span>
<span class="x">{</span>
<span class="x">  public function actionIndex() {</span>
<span class="x">    //...</span>
<span class="x">  }</span>
<span class="x">  public function actionContact() {</span>
<span class="x">    //...</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="sect2">
<h3 id="_2_4_1_">2.4.1 Роути</h3>
<div class="paragraph"><p>Контролери та дії ідентифікуються по ID. ID контролера має формат <code>path/to/xyz</code>, що відповідає файлу класу контролера <code>protected/controllers/path/to/XyzController.php</code>. ID дії є ім'я методу дії без префіксу <code>action</code>. Наприклад, якщо клас контролера містить метод <code>actioinEdit</code>, ID відповідної дії буде <code>edit</code>.</p></div>
<div class="paragraph"><p>Користувачі запитують певний контролер та дію в термінах роутів. Роут формується конкатенацією ID контролера та ID дії, роздідені косою. Наприклад, роут <code>post/edit</code> посилається на <code>PostController</code> та дію <code>edit</code>. По замовчанню URL <code>http://hostname/index.php?r=post/edit</code> буде запитувати контролер <code>post</code> та дію <code>edit</code>.</p></div>
<div class="paragraph"><p><strong>Зауваження:</strong> По замовчанню роути чутливі до реєстру. Можливо зробити їх нечутливими, встановивши <code>CUrlManager::caseSensitive</code> в <code>false</code> в конфігурації застосування. В режимі нечутливості до реєстра переконайтесь, що ви слідуєте домовленості, за якої директорії, які містять файли класу контролера, є в нижньому реєстрі, та обоє, мапа контролера та мапа дій обоє мають ключі в нижньому реєстрі.</p></div>
<div class="paragraph"><p>Застосування може містити модулі. Роут для дії контролера в модулі має формат <code>moduleID/controllerID/actionID</code>. Для додаткових подробиць дивіть розділ про модулі.</p></div>
</div>
<div class="sect2">
<h3 id="_2_4_2___">2.4.2 Створення примірника контролера</h3>
<div class="paragraph"><p>Примірник контролера створюється, коли <code>CWebApplication</code> обробляє прийдешній запит. Маючи ID контролера, застосування буде використовувати наступні правила для визначення, який буде клас контролера, та де розташовано файл класу.</p></div>
<div class="ulist"><ul>
<li>
<p>
Якщо вказаний <code>CWebApplication::catchAllRequest</code>, контролер буде створений базуючись на цій властивості, і наданий користувачем ID контролера буде проігнорований. Це в основному використовується для перемикання застосування в режим обслуговування, та відображення статичної сторінки повідомлення.
</p>
</li>
<li>
<p>
Якщо ID знайдений в <code>CWebApplication::controllerMap</code>, для ствоерння примірника контролера буде використана відповідна конфігурація контролера.
</p>
</li>
<li>
<p>
Якщо ID в форматі <code>path/to/xyz</code>, ім'я класу контролера вважається <code>XyzController</code>, та відповідний файл класу є <code>protected/controllers/path/to/XyzController.php</code>. Наприклад, ID контролера <code>admin/user</code> буде відображено на клас контролера <code>UserController</code>, та файл класу <code>protected/controllers/admin/UserController.php</code>. Якщо клас не знайдено, буде закинуте <code>CHttpException</code> 404.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Коли використовуються модулі, цей процес трохи інший. Зокрема, застосування буде превіряти, чи ID посилається на контролер в модулі, і якщо це так, спочатку буде створено примірник модуля, за яким буде створено примірник контролера.</p></div>
</div>
<div class="sect2">
<h3 id="_2_4_3_">2.4.3 Дії</h3>
<div class="paragraph"><p>Як вже зазначалось, дія може бути визначена як метод, чиє ім'я починається зі слова <code>action</code>. Більш просунута техніка є визначення класу дії, та запит до контролера створити примірник за потреби. Це дозволяє повторно використовувати події, і, таким чином, додати реюзабіліті.</p></div>
<div class="paragraph"><p>Для визначення нового класу події зробіть наступне:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class UpdateAction extends CAction</span>
<span class="x">{</span>
<span class="x">  public function run()</span>
<span class="x">  {</span>
<span class="x">    // action logic</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб контролер знав про цю дію, ми перекриваємо метод <code>actions()</code> нашого класу контролера:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PostController extends CController</span>
<span class="x">{</span>
<span class="x">  public function actions()</span>
<span class="x">  {</span>
<span class="x">    return array(</span>
<span class="x">      &#39;edit&#39;=&gt;&#39;application.controllers.post.UpdateAction&#39;,</span>
<span class="x">    );</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Вище ми використовуємо псевдоним шляху <code>application.controllers.post.UpdateAction</code>. щоб вказати, що файл класу дії є <code>protected/controllers/post/UpdateAction.php</code>.</p></div>
<div class="paragraph"><p>Створюючи базовані на класах дії ми можемо організувати застосування в модульний спосіб. Наприклад, наступна структура директорій може бути використана для організації коду для контролерів:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span>protected/
  controllers/
    PostController.php
    UserController.php
    post/
      CreateAction.php
      ReadAction.php
      UpdateAction.php
    user/
      CreateAction.php
      ListAction.php
      ProfileAction.php
      UpdateAction.php
</pre></div></div></div>
<div class="sect3">
<h4 id="___">Біндінг параметрів дії</h4>
<div class="paragraph"><p>З версії 1.1.4 Yii додає підтримку автоматичного біндінгу (прикреплення) парамерів дій. Тобто, метод дії контролера може визначати іменовані параметри, чиї значення будуть автоматично заповнюватись Yii з <code>$_GET</code>.</p></div>
<div class="paragraph"><p>Щоб проілюструвати, як це робить, давайте уявимо, що нам треба написати дію <code>create</code> для <code>PostController</code>. Дія потребує два параметри:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>category</code>: ціле, що вказує ID категорії, під якою буде створено новий пост;
</p>
</li>
<li>
<p>
<code>lannguage</code>: рядок, що вказує код мови, на якій буде новий пост.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Ми можемо створити такій нудний код для цієї цілі, що отримує потрібні значення параметрів з <code>$_GET</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PostController extends CController</span>
<span class="x">{</span>
<span class="x">  public function actionCreate()</span>
<span class="x">  {</span>
<span class="x">    if(isset($ GET[’category’]))</span>
<span class="x">      $category=(int)$ GET[’category’];</span>
<span class="x">    else</span>
<span class="x">      throw new CHttpException(404,’invalid request’);</span>

<span class="x">    if(isset($ GET[’language’]))</span>
<span class="x">      $language=$ GET[’language’];</span>
<span class="x">    else</span>
<span class="x">      $language=’en’;</span>

<span class="x">    // ... code</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Тепер, використовуючи можливість параметрів дії, ми можемо досягти цієї цілі більш приємно:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PostController extends CController</span>
<span class="x">{</span>
<span class="x">  public function actionCreate($category, $language=’en’)</span>
<span class="x">  {</span>
<span class="x">    $category=(int)$category;</span>
<span class="x">    // ... code</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Зверніть увагу, як ми додаємо два параметри до методу дії <code>actionCreate</code>. Імена ціх параметрів мають бути точно такі сами, які ми очікуємо від <code>$_GET</code>. Параметр <code>$language</code> приймає значення по замовчанню <code>en</code>, в випадку, коли запит не містить такого параметру. Оскільки <code>$category</code> не має значення по замовчанню, якщо запит не включає параметра <code>category</code>, автоматично буде закинуте <code>CHttpException</code> (код помилки 400).</p></div>
<div class="paragraph"><p>Починаючи з версії 1.1.5 Yii також підтримує розпізнання типу массиву для параметрів дії. Це робиться через підказки типів PHP з використанням наступного синтаксису:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PostController extends CController</span>
<span class="x">{</span>
<span class="x">  public function actionCreate(array $categories)</span>
<span class="x">  {</span>
<span class="x">    // Yii переконається, що $categories є массивом</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Тобто, ми дадаємо ключове слово <code>array</code> перед <code>$categories</code> в декларації параметра метода. Коли ми робимо це, якщо <code>$_GET['categories']</code> є простий рядок, він буде перетворений на масив, що складається з одного рядка.</p></div>
<div class="paragraph"><p><strong>Зауваження:</strong> якщо параметр декларовано без підказки типу <code>array</code>, це означає, що він має бути скаларом (тобто, не масивом). В цьому випадку передача параметру-массиву через <code>$_GET</code> спричинить виключення HTTP.</p></div>
<div class="paragraph"><p>Починаючи з версії 1.1.7 автоматичне прикріплення параметрів також робить для базованих на класах дій. Якщо метод <code>run()</code> класу дії визначений з деякими параметрами, вони будуть заповнені відповідними іменованими параметрами запиту. Наприклад:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class UpdateAction extends CAction</span>
<span class="x">{</span>
<span class="x">  public function run($id)</span>
<span class="x">    {</span>
<span class="x">    // $id отримає значення від $_GET[’id’]</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div></div></div>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_4_">2.4.4 Фільтри</h3>
<div class="paragraph"><p>Фільтр є частиною коду, що зконфігурований для виконання перед та/або після виконання дії контролера. Наприклад, фільтр контроля доступу може бути виконаний, щоб переконатись, що користувач аутентифікаваний перед виконанням запитаної дії; фільтр профілювання може бути використаний для виміру часу, протягом якого виконується дія.</p></div>
<div class="paragraph"><p>Дія може мати декілька фільтрів. Фільтри виконуються в тому порядку, в якому вони трапляються в списку фільтрів. Фільтр може запобігти виконанню дії і решти невиконаних фільтрів.</p></div>
<div class="paragraph"><p>Фільтр може бути визначений як метод класу контролера. Ім'я метода має починатись з <code>filter</code>. Наприклад, метод на ім'я <code>filterAccessControl</code> визначає фільтр на ім'я <code>accessControl</code>. Метод фільтру повинен мати вірну сигнатуру:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">public function filterAccessControl($filterChain)</span>
<span class="x">{</span>
<span class="x">// викличте $filterChain-&gt;run() для продовження виконання фільтрів та дії</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Тут <code>$filterChain</code> є примірником <code>CFilterChain</code>, що представляє список фільтрів, асоційований з запитаною дією. В методі фільтра ми можемо викликати <code>$filterChain-&gt;run()</code> для продовження виконання фільтрів та дії.</p></div>
<div class="paragraph"><p>Фільтр також може бути примірником <code>CFilter</code>, або дочірнього класу. Наступний код визначає новий клас фільтру:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PerformanceFilter extends CFilter</span>
<span class="x">{</span>
<span class="x">  protected function preFilter($filterChain)</span>
<span class="x">  {</span>
<span class="x">    // логіка для застосування до виконання дії</span>
<span class="x">    return true; // false для переривання виконання дії</span>
<span class="x">  }</span>

<span class="x">  protected function postFilter($filterChain)</span>
<span class="x">  {</span>
<span class="x">    // логіка для застосування після виконання дії</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб застосувати фільтри до дій, нам треба перекрити метод <code>CController::filters()</code>. Метод має повертати масив конфігурацій фільтрів. Наприклад:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class PostController extends CController</span>
<span class="x">{</span>
<span class="x">  ...</span>
<span class="x">  public function filters()</span>
<span class="x">  {</span>
<span class="x">    return array(</span>
<span class="x">      ’postOnly + edit, create’,</span>
<span class="x">      array(</span>
<span class="x">        ’application.filters.PerformanceFilter - edit, create’,</span>
<span class="x">        ’unit’=&gt;’second’,</span>
<span class="x">      ),</span>
<span class="x">    );</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Цей код визначає два фільтри: <code>postOnly</code> та <code>PerformanceFilter</code>. Фільтр <code>postOnly</code> базований на методі (відповідний метод фільтру вже визначений в <code>CControler</code>); тоді як фільтр <code>PerformanceFilter</code> базований на об'єкті. Псевдоним шляху <code>application.filters.PerformanceFilter</code> вказує, що файл фільтра є <code>protected/filters/PerformanceFilter.php</code>. Ми використовуємо масив для конфігурації <code>PerformanceFilter</code>, так що він може бути використаний для ініціалізації значень властивостей об'єкту фільтра. Тут є властивість <code>unit</code> для <code>PerformanceFilter</code>, що буде ініціалізований як <code>second</code>.</p></div>
<div class="paragraph"><p>Використовуючи оператори плюс та мінус ми можемо задати, до яких дій фільтр має бути або не має бути застосований. Вище фільтр <code>postOnly</code> буде застосований до дій <code>edit</code> та <code>create</code>, коли фільтр <code>PerformanceFilter</code> буде застосований до всіх дій, КРІМ <code>edit</code> та <code>create</code>. Якщо в конфігурації фільтру не трапляється ні плюса, ані мінуса, фільтр буде застосовано до всіх дій.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_5_">2.5 Модель</h2>
<div class="sectionbody">
<div class="paragraph"><p>Модель є примірником <code>CModel</code>, або класу, що розширює <code>CModel</code>. Моделі використовуються щоб утримувати дані та їх відповідні бізнес правила.</p></div>
<div class="paragraph"><p>Модель представляє окремий об'єкт даних. Це може бути рядок в таблиці бази даних, або html форму з вхідними даними користувача. Кожне поле об'єкта даних представлене атрибутом моделі. Атрибут має мітку, і може бути валідований згідно набору правил.</p></div>
<div class="paragraph"><p>Yii реалізує два різновиди моделей: моделі форм та ектив записи. Вони обоє розширюють той самий базовий клас, <code>CModel</code>.</p></div>
<div class="paragraph"><p>Модель форми є примірником <code>CFormModel</code>. Моделі форм використовуються для зберігання даних, зібранних зі входу. Такі дані часто збираються, використовуються, та потім відкидаються. Наприклад, на формі логіну ми можемо використати модель форми для представлення інформації щодо імені та пароля користувача, наданих користувачем. Для додаткової інформації звертайтесь до розділу Робота з формами.</p></div>
<div class="paragraph"><p>Active Record (AR) є шаблоном розробки для абстрактного доступу до бази даних в об'єктно-орієнтовному стилі. Кожний AR об'єкт є примірником <code>CActiveRecord</code>, або субкласом цього класу, представляючи окремий рядок в таблиці бази даних. Поля в рядку представлені як властивості AR об'єкта. Деталі щодо AR можна знайти в Active Record.</p></div>
<div class="paragraph"><p>Для кращої практики по визначенню ваших моделей перевірте Best MVC Practices, розділ Model.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_2_6_">2.6 Вью</h2>
<div class="sectionbody">
<div class="paragraph"><p>Вью є PHP скрипт, що здебільшого складається з елементів користувацького інтерфейсу. Він може містити PHP твердження, але рекомендовано, щоб ці твердження не змінювали моделі даних, та були відносно простими. В дусі розділення логіки від презентації, великі шматки логіки повинні розташовуватись в контролерах або моделях, скоріше ніж у вью.</p></div>
<div class="paragraph"><p>Вью має ім'я, що використовується для ідентифікації файла скрипта вью під час малювання. Ім'я вью є те саме, що і ім'я його скрипта. Наприклад, ім'я вью <code>edit</code> послається на скрипт вью <code>edit.php</code>. Щоб відобразити вью викличте <code>CControler:render()</code> з ім'ям вью. Метод буде шукати відповідний файл вью в директорії <code>protected/views/ControllerID</code>.</p></div>
<div class="paragraph"><p>У вью скрипті ми можемо отримати доступ до примірника контролера з використанням <code>$this</code>. Так що ми можемо <code>pull</code> любу властивість контролера через обчислення <code>$this-&gt;propertyName</code> всередині вью.</p></div>
<div class="paragraph"><p>Також ми можемо використовувати наступний <code>push</code> підхід для передачі даних у вью:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">$this-&gt;render(’edit’, array(</span>
<span class="x">  ’var1’=&gt;$value1,</span>
<span class="x">  ’var2’=&gt;$value2,</span>
<span class="x">));</span>
</pre></div></div></div>
<div class="paragraph"><p>Вище метод <code>render()</code> буде виділяти значення з другого параметру в змінні. Як результат в скрипті вью ми зможемо отримати доступ до змінних <code>$var1</code> та <code>$var2</code>.</p></div>
<div class="sect2">
<h3 id="_2_6_1_">2.6.1 Лейаути</h3>
<div class="paragraph"><p>Лейаут э особливим вью, що використовуються для декорування вью. Він звичайно містить частини користувацького інтерфейсу, що є загальними для декількох вью. Наприклад, лейаут може містити хедер та футер, та вставити вью посередині, таким чином:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">......хедер......</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$content</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">......футер......</span>
</pre></div></div></div>
<div class="paragraph"><p>де <code>$content</code> зберігає результат рендерінгу вью.</p></div>
<div class="paragraph"><p>Лейаут неявно застосовується коли викликається <code>render()</code>. По замовчанню в якості лейаута використовується вью <code>protected/views/layouts/main.php</code>. Це можна налаштувати або змінівши <code>CWebApplication::layout</code> або <code>CController::layout</code>. Щоб відрендерити вью без застосування жодного лейаута використовуйте <code>renderPartial()</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_2_6_2_">2.6.2 Віджет</h3>
<div class="paragraph"><p>Віджет є примірником <code>CWidget</code>, або дочірнім класом <code>CWidget</code>. Це компонент, що служить здебільшого цілям презентації. Віджет зазвичай вбудовується у вью скрипт для генерації складного, але самодостатнього користувацького інтерфейсу. Наприклад, віджет календаря може бути використаний для рендерінга складного користувацького інтерфейсу календаря. Віджети спрощують кращу реюзабіліті в коді користувацького інтерфейсу.</p></div>
<div class="paragraph"><p>Щоб використати віджет зробіть наступне в вью скрипті:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">beginWidget</span><span class="p">(</span><span class="nx">’path</span><span class="o">.</span><span class="nx">to</span><span class="o">.</span><span class="nx">WidgetClass’</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">...тіло вмісту, що може бути захоплений віджетом...</span>
<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">endWidget</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div></div></div>
<div class="paragraph"><p>або</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nx">’path</span><span class="o">.</span><span class="nx">to</span><span class="o">.</span><span class="nx">WidgetClass’</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div></div></div>
<div class="paragraph"><p>Останнє використовується, коли віджет не потребує жодного тіла вмісту.</p></div>
<div class="paragraph"><p>Віджети можуть бути зконфігуровані для налаштування їх поведінки. Це робиться через встановлення їх початкових значень властивостей, викликаючи <code>CBaseController::beginWidget</code> або <code>CBaseController::widget</code>. Наприклад, коли використовується віджет <code>CMaskedTextField</code>, нам може знадобитись задати маску для використання. Ми можемо зробити це, передавши масив початкових значень властивостей, як показано нижче, де ключі масиву є іменами властивостей, та масив значень є значеннями ініціалізації відповідних властивостей віджету:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nx">’CMaskedTextField’</span><span class="p">,</span><span class="k">array</span><span class="p">(</span>
  <span class="nx">’mask’</span><span class="o">=&gt;</span><span class="nx">’99</span><span class="o">/</span><span class="mi">99</span><span class="o">/</span><span class="mi">9999</span><span class="nx">’</span>
<span class="p">));</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб визначити новий віджет, розширьте <code>CWidget</code>, та перекрийте його методи <code>init()</code> та <code>run()</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="x">class MyWidget extends CWidget</span>
<span class="x">{</span>
<span class="x">  public function init()</span>
<span class="x">  {</span>
<span class="x">    // викликається CController::beginWidget()</span>
<span class="x">  }</span>
<span class="x">  public function run()</span>
<span class="x">  {</span>
<span class="x">    // викликається CController::endWidget()</span>
<span class="x">  }</span>
<span class="x">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Подібно до контролера, віджет також може мати свій власний вью. По замовчанню файли вью віджета розташовані в субдиректорії <code>views</code> директорії, де розташований файл класу віджета. Ці вью можуть рендеритись через виклик <code>CWidget::render()</code>, подібно тому, як це робиться в контролері. Одна різниця полягає в тому, що при цьому не буде застосовано лейаут. Також <code>$this</code> у вью буде посилатись на примірник віджету, замість примірника контролера.</p></div>
<div class="paragraph"><p><strong>Підказка:</strong> <code>CWidgetFactory::widgets</code> може бути використаний для конфігурації віджетів на рівні сайту, дозволяючи значно простіше базове конфігурування. Ви можете знайти деталі в розділі про теми.</p></div>
</div>
<div class="sect2">
<h3 id="_2_6_3__">2.6.3 Системні вью</h3>
<div class="paragraph"><p>Системні вью посилаються на вью, що використовуються Yii для відображення помилок та журнальної інформації. Наприклад, коли користувач запитує неіснуючий контролер або дію, Yii буде закидати виключення з поясненням помилки. Yii відображує виключення, використовуючи спеціальне системне вью.</p></div>
<div class="paragraph"><p>Іменування системних вью слідує деяким правилам. Імена як <code>errorXXX</code> посилаються на вью для відображення <code>CHttpException</code> з кодом помилки <code>XXX</code>. Наприклад, якщо <code>CHttpException</code> підійнято з кодом помилки 404, буде відображено вью <code>error404</code>.</p></div>
<div class="paragraph"><p>Yii провадить набір системних вью по замовчанню, розташованих в <code>framework/vievs</code>. Вони можуть бути налаштовані, якщо створити так само названі файли вью в <code>protected/views/system</code>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_7_">2.7 Компонент</h2>
<div class="sectionbody">
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2020-11-12 20:19:58 EET
</div>
</div>
</body>
</html>
