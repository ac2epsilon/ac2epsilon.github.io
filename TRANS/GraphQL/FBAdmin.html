<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="___admin_auth_api">Вступ до Admin Auth API</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="https://firebase.google.com/docs/auth/admin">базовий документ</a></p></div>
<div class="paragraph"><p>Firebase Admin SDK дозволяє вам інтегрувати ваші власні сервери з Firebase Authentication. Ви можете використовувати Firebase Admin SDK для керування вашими користувачами або користування токенами аутентифікації. Є багато причин робити це:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Керування користувачами</strong> Не завжди зручно заходити в консоль Firebase для керування користувачами. API керування користувачами надає прагматичний доступ до тих самих користувачів. Він навіть дозволяє речі, що неможливі в консолі, такі, як отримання всіх даних користувача, зміна пароля, електронної адреси або телефону. Firebase Admin SDK провадить API для керування вашими Firebase користувачами з піднесеними привелеями. Це дає змогу відкликати, створювати, оновлювати та видаляти користувачів без отримання існуючих паролей користувачів та без турбот з обмеженнями клієнтського доступу.
</p>
</li>
<li>
<p>
<strong>Власна аутентифікація</strong> Ви можете інтегрувати зовнішню систему користувачів з Firebase. Наприклад, ви можете вже мати базу даних користувачів, або ви бажаєте інтегрувати деякого провайдера, що природно не підтримується Firebase Authentication. Щоб зробити це, ви можете створити власні токени з довільними твердженнями, що ідентифікують користувача. Ці токени потім можуть використовуватись для входу до Firebase Authentication в клієнтському застосуванні і підтверджувати ідентичність, описану твердженнями токену. Ця ідентичність може бути застосована для доступу до сервісів Firebase, як Cloud Storage.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Первинне використання для створення власних токенів - дозволити користувачам авторизуватись через зовнішний або застарілий механізм. Це може бути дещо під вашим контролем, як LDAP сервер, або сторонній провайдер OAuth, що природно не підтримується Firebase, як Instagram або LinkedIn.</p></div>
<div class="paragraph"><p>Firebase Admin SDK має вбудований метод для створення власних токенів. Ви також можете власноруч створювати токени в любій мові, з використанням сторонніх бібліотек JWT. Ваш сервер має створити власний токен з унікальним ідентифікатором (uid), та передати цей токен в користувацьке застосування, що буде використовуватись для входу до Firebase. Дивіться нижче щодо цього процесу.</p></div>
<div class="paragraph"><p>Зауваження: якщо вам треба підключитись до Firebase Realtime Database з вашого сервера, не використовуйте власні токени. Замість цього використовуйте Firebase Admin SDK для аутентифікації з обмеженими привелеями.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Верифікація ідентичності</strong> Firebase Authentication в основному застосовується для ідентифікації користувачів вашого застосування, щоб обмежити доступ до інших сервісів, як Cloud Storage. Ви також можете використати цей сервіс для ідентифікації користувачів на вашому власному сервері. Це дозволить вам безпечно виконувати серверну логіку від імені користувачів, що пройшли аутентифікацію Firebase Authentication. Для цього ви отримуєте токен від клієнтського застосування, що пройшло  Firebase Authentication, та включає токен в запиті до сервера. Ваш сервер верифікує токен, та виділяє твердження користувача (його uid, провайдер ідентифікації, тощо). Ця інформація ідентичності може застосовуватись вашим сервером для виконання дій від імені користувача.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Якщо ваш клієнт Firebase комунікує з бекендом, вам може знадобитись ідентифікувати поточного користувача, щоб виконувати дії від його імені. Ви можете робити це безпечно, використовуючи ID токени, що створені Firebase коли користувач входить в систему. ID токені відповідають спцифікації OpenID Connect, та містять дані про користувача, так само як і інші дані профілю і інформацію, пов'язану з аутентифікацією. Ви можете надсилати, перевіряти, та переглядати ці токени від ваших власних бекендів. Це дозволяє вам безпечно ідентифікувати поточного користувача, та надавати доступ до його бекенд ресурсів.</p></div>
<div class="paragraph"><p>Firebase Admin SDK має вбудований метод для верифікації ID токенів. Ви також можете власноруч перевіряти ID токени в любій мові, використовуючи JWT бібліотеки. Шукайте докладну інформацію щодо верифікації деінде.</p></div>
<div class="paragraph"><p>Зауваження: ця документація пояснює, як керувати токенами аутентифікації. Якщо ви, замість цього, шукаєте документацію, як аутентифікувати Admin SDK для доступу до Firebase Realtime Database, перегляньте Introduction to the Admin Database API. Firebase Admin SDK надає методи для отримання аутентифікації, перераховані вище, щоб дозволити вам керувати користувачами, генерувати власні токени та перевіряти ID токени.</p></div>
<div class="paragraph"><p>Зауваження: якщо ваш сервер має емулювати користувацьки дії, як доступ до Firebase Realtime Database від імені користувача, вам слідує спершу верифікувати та декодувати ID токен для цього користувача. Потім використовуйте <code>databaseAuthVariableOverride</code> для обмеження привелеїв на сервері, як описане в Authenticate with limited privileges.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Власні твердження користувачів</strong> В деяких випадках ви можете побажати реалізувати гарно налаштований контроль доступу для вже зареєстрованих користувачів через один з підтримуваних провайдерів, як Email/Password, Google, Facebook, phone, тощо. Комбінація власних користувацьких твержень та правил безпеки застосування провадить цю можливість. Наприклад, користувач, шо війшов через метод Firebase Authentication Email and Password, може отримувати контроль на основі визначених власних тверджень користувачів.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Firebase Admin SDK дозволяє вам встановити власні атрибути на користувацьких рахунках. З власними користувацькими твердженнями ви можете встановити різні рівні доступу (ролі), що потім примушує до виконання правил безпеки застосування.</p></div>
<div class="paragraph"><p>Після модифікації власних тверджень на користувачеві через Firebase Admin SDK, вони просуваються до аутентифінкованих користувачів на стороні клієнта через їхні ID токени. ID токени є довірений механізм для доставлення ціх власних тверджень, та весь аутентифікований доступ має валідувати ID токен перд обробкою асоційованого запиту.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="__id_">Перевірка ID токенів</h2>
<div class="sectionbody">
<div class="paragraph"><p>Якщо ваш клієнт Firebase комунікує з власним бекенд сервером, вам може знадобитись ідентифікувати поточного користувача на сервері. Щоб зробити це безпечно після входу в систему надішліть ID токен користувача на сервер використовуючи HTTPS. Тоді на сервері перевірте цілісність та ідентичність токену, та отримати з нього uid. Ви можете використовувати  <code>uid</code> отриманий таким шляхом для безпечної ідентифікації поточного користувача на вашому сервері.</p></div>
<div class="paragraph"><p>Зауваження: багато випадків для верифікації токенів на сервері можна вирішити з використанням Security Rules для Firebase Realtime Database та Cloud Storage. Перевірте, чи не вирішить це проблему, пере тим, як перевіряти токени власноруч.</p></div>
<div class="paragraph"><p>Попередження: методи верифікації токенів з Admin SDKs призначені для перевірки токенів, що надходять від клієнтських SDK, а не власних токенів, що ви створюєте за допомогую Admin SDK. Дивіться Auth tokens щодо додаткової інформація.</p></div>
<div class="sect2">
<h3 id="___firebase_admin_sdk">Підключення до Firebase Admin SDK</h3>
<div class="paragraph"><p>Щоб перевіряти токени через Firebase Admin SDK ви маєте створити сервісний рахунок. Admin SDK - це набір сервісних бібліотек, що дозволяють вам взаємодіяти з Firebase з привелійованого оточення для виконання наступних дій:</p></div>
<div class="ulist"><ul>
<li>
<p>
Читати та писати дані Realtime Database з повними адмін привелеями.
</p>
</li>
<li>
<p>
Програмно надсилати повідомлення Firebase Cloud Messaging через простий підхід, альтернативний протоколам Firebase Cloud Messaging.
</p>
</li>
<li>
<p>
Генерувати та перевіряти токени аутентифікації.
</p>
</li>
<li>
<p>
Отримувати ресурси Google Cloud як бакети Cloud Storage та бази Cloud Firestore, асоційовані з вашим проектом.
</p>
</li>
<li>
<p>
Створювати вашу власну спрощену адмін консоль для таких речей, як перегляд даних користувачів або зміна поштової скриньки користувача для аутентифікації.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Для роботи JS версії Firebase Admin SDK вам знадобиться встановлений на сервері Node.js 10.13.0+. Детальніше щодо інших мов <a href=":https://firebase.google.com/docs/admin/setup">дивіться тут</a>. Модуль додається до проекта сервера командою:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span>yarn add firebase-admin
<span class="c1"># або</span>
npm install firebase-admin --save
</pre></div></div></div>
<div class="paragraph"><p>Потім імпортуєте його в код</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;firebase-admin&#39;</span><span class="p">);</span>
<span class="c1">// або</span>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">admin</span> <span class="nx">from</span> <span class="s1">&#39;firebase-admin&#39;</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p>Також вважатимемо що ви вже маєте проект Firebase. Тепер ви можете ініціалізувати SDK стратегією авторизації, що комбінує ваш файл сервісного рахунку з Google Application Default Credentials. Проекти Firebase підтримують сервісні рахунки, які ви можете використовувати для виклику сервісних API з вашого серверу або довіреного середовища. Якщо ви розробляєте код локально або розгортаєте застосування у клієнта, для авторизації запитів сервера ви можете використовувати вірчі дані, отримані від серверного рахунку.</p></div>
<div class="paragraph"><p>Щоб аутентикувати сервіснй рахунок та авторизувати його для доступу до сервісів Firebase, ви маєте згенерувати JSON файл приватного ключа.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
В консолі Firebase відкрийте <strong>Settings &gt; Service Accounts</strong>.
</p>
</li>
<li>
<p>
Клацніть <strong>Generate New Private Key</strong> і підтвердіть дію.
</p>
</li>
<li>
<p>
Надійно збережіть отриманий файл.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Коли ви входите до сервісного аккаунта, ви маєте два варіанти. Ви можете або встановити змінну оточення <code>GOOGLE_APPLICATION_CREDENTIALS</code>, або можете надати шлях до ключа прямо в коді. Перший метод безбечніший, і ми радимо його використання.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">GOOGLE_APPLICATION_CREDENTIALS</span><span class="o">=</span><span class="s2">&quot;/home/ac/service-account-file.json&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>Після ціх кроків Application Default Credentials (ADC) зможе неявно визначити довірчі дані, що дозволяє використовувати дані сервісного рахунку для тестування або роботі в не-Google оточенні.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="nx">admin</span><span class="p">.</span><span class="nx">initializeApp</span><span class="p">({</span>
    <span class="nx">credential</span><span class="o">:</span> <span class="nx">admin</span><span class="p">.</span><span class="nx">credential</span><span class="p">.</span><span class="nx">applicationDefault</span><span class="p">(),</span>
    <span class="nx">databaseURL</span><span class="o">:</span> <span class="s1">&#39;https://&lt;DATABASE_NAME&gt;.firebaseio.com&#39;</span>
<span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Зауваження: опції ініціалізації, як показана в коді <code>databaseURL</code>, не є конче потрібними для ініціалізації SDK. В залежності від оточення розгортання і цільового випадку використання ви можете вказувати тільки потрібні вам опції.</p></div>
<div class="paragraph"><p>Також підтримується аутентифікація рефреш токеном Google OAuth.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">refreshToken</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span><span class="p">;</span> <span class="c1">// отримманя токену з потоку OAuth2</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">initializeApp</span><span class="p">({</span>
  <span class="nx">credential</span><span class="o">:</span> <span class="nx">admin</span><span class="p">.</span><span class="nx">credential</span><span class="p">.</span><span class="nx">refreshToken</span><span class="p">(</span><span class="nx">refreshToken</span><span class="p">),</span>
  <span class="nx">databaseURL</span><span class="o">:</span> <span class="s1">&#39;https://&lt;DATABASE_NAME&gt;.firebaseio.com&#39;</span>
<span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Зауваження: рефреш токени OAuth 2.0 не підтримуються для під'єднання до  Cloud Firestore.</p></div>
<div class="paragraph"><p>SDK також може бути ініціалізований без параметрів. В цьому випадку використовуються Google Application Default Credentials. Довірчі дані шукаються повністю автоматично в Google оточенні, так що це рекомендовване для Compute Engine, Kubernetes Engine, App Engine, та Cloud Functions. Для передачі додаткових параметрів ініціалізації для сервісів як Realtime Database, Cloud Storage, або Cloud Functions, використовуйте змінну оточення <code>FIREBASE_CONFIG</code>. Якщо перший символ значення є <code>{</code>, воно буде сприйматись як JSON. Інакше значення тлумачиться як шлях до JSON файлу з параметрами.</p></div>
<div class="paragraph"><p>Зауваження: змінна <code>FIREBASE_CONFIG</code> включається автоматично в Cloud Functions для функцій Firebase, коли вони завантажуються через Firebase CLI.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">admin</span><span class="p">.</span><span class="nx">initializeApp</span><span class="p">();</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="____">Отримання токенів на клієнті</h3>
<div class="paragraph"><p>Коли користувач або пристрій вдало входить до системи, Firebase створює відповідний ID токен, що унікально ідентифікує його, та гарантує доступ до ресурсів, як Firebase Realtime Database та Cloud Storage. Ви можете використати токен повторно на своєму сервері. Щоб отримати токен переконайтесь, що є поточний користувач та запитайте його токен:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="nx">firebase</span><span class="p">.</span><span class="nx">auth</span><span class="p">().</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">getIdToken</span><span class="p">(</span><span class="cm">/* forceRefresh */</span> <span class="kc">true</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">idToken</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// перешліть токен на бекенд по HTTPS</span>
  <span class="c1">// ...</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// обробка помилки</span>
<span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Коли ви маєте токен JWT до вашого бекенда та перевірити його через Firebase Admin SDK або сторонню бібліотеку JWT, якщо ваш сервер написаний на мові, що не підтримується природно.</p></div>
</div>
<div class="sect2">
<h3 id="__id____firebase_admin_sdk">Перевірка ID токенів з використанням Firebase Admin SDK</h3>
<div class="paragraph"><p>Firebase Admin SDK має вбудований метод для перевірки та декодування токенів. Якщо наданий токен має коректний формат, не прострочений і відповідно підписаний, метод повертає декодований токен. З нього можна отримати <code>uid</code> користувача або пристрою.</p></div>
<div class="paragraph"><p>Зауваження: це не перевіряє, чи був токен відкликаний. Дивіться <a href=":https://firebase.google.com/docs/auth/admin/manage-sessions#detect_id_token_revocation">тут</a>
Detect ID token revocation.</p></div>
<div class="paragraph"><p>Після ініціалізації використовуйте метод <code>verifyIdToken()</code> для верифіфкації токену:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="c1">// idToken надходить зі сторони клієнта</span>
<span class="nx">admin</span>
  <span class="p">.</span><span class="nx">auth</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">verifyIdToken</span><span class="p">(</span><span class="nx">idToken</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">decodedToken</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nx">decodedToken</span><span class="p">.</span><span class="nx">uid</span><span class="p">;</span>
    <span class="c1">// ...</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// обробка помилки</span>
  <span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Верифікація ID токену потребує ID пректу. Firebase Admin SDK намагається отримати ID проекту одним з методів:</p></div>
<div class="ulist"><ul>
<li>
<p>
Якщо SDK було ініціалізовано з явною опцією <code>projectId</code>, буде використане це значення.
</p>
</li>
<li>
<p>
Якщо SDK було ініціалізовано з довірчими даними сервісного рахунку, SDK використовує поле <code>project_id</code> JSON об'єкту рахунку.
</p>
</li>
<li>
<p>
Якщо встановлена змінна оточення <code>GOOGLE_CLOUD_PROJECT</code>, SDK використовує його значення як ID проекту. Ця змінна доступна для коду, що виконується в інфраструктурі, як App Engine та Compute Engine.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_react_apollo_">React Apollo аутентифікація</h2>
<div class="sectionbody">
<div class="paragraph"><p>Тільки якщо ваші дані не є повністю публічні, ваше застосування має деякий різновид користувачів, рахунків та систем дозволів. Якщо різні користувачі мають різні дозволи в вашому застосуванні, вам треба спосіб сказати серверу, який користувач асоційований з запитом. Apollo Client використовує вкрай гнучний Apollo Link, що має декілька опцій для аутентифікації.</p></div>
<div class="sect2">
<h3 id="_cookie">Cookie</h3>
<div class="paragraph"><p>Якщо ваше застосування базується на браузері і ви використовуєте кукіз для логіну та керування сессіями на бекенді, накажіть вашому мережевому інтерфейсу надсилати кукі в кожному запиті. Передайте опцію <code>credentials: 'same-origin'</code> якщо ваш бекенд сервер в тому самому домені, як показано нижче, або <code>credentials: 'include'</code>, якщо ваш бекенд в іншому домені.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">createHttpLink</span><span class="p">({</span>
  <span class="nx">uri</span><span class="o">:</span> <span class="s1">&#39;/graphql&#39;</span><span class="p">,</span>
  <span class="sb">`credentials: &#39;same-origin&#39;`</span>
<span class="p">});</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ApolloClient</span><span class="p">({</span>
  <span class="nx">cache</span><span class="o">:</span> <span class="k">new</span> <span class="nx">InMemoryCache</span><span class="p">(),</span>
  <span class="nx">link</span><span class="p">,</span>
<span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Ця опція передається до реалізації <code>fetch</code>, що використовується <code>HttpLink</code> при надсиланні запиту.</p></div>
<div class="paragraph"><p>Зауваження: бекенд також має дозволяти довірчі дані для даного місця, або в термінах популярного пакунку <code>cors</code> в node.js, наступні налаштування мають робити в тандемі з наступними налаштуваннями клієнта <code>apollo</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="c1">// enable cors</span>
<span class="kd">var</span> <span class="nx">corsOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">origin</span><span class="o">:</span> <span class="s1">&#39;&lt;insert uri of front-end domain&gt;&#39;</span><span class="p">,</span>
  <span class="nx">credentials</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// &lt;-- REQUIRED backend setting</span>
<span class="p">};</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">(</span><span class="nx">corsOptions</span><span class="p">));</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_">Заголовок</h3>
<div class="paragraph"><p>Інший загальний шлях ідентифікувати себе при використанні HTTP - це надіслати заголовок <code>authorization</code> в кожному HTTP запиті, зціплюючи разом Apollo Links. В цьому прикладі ми підтягуємо токен з <code>localStorage</code> кожного разу при надсиланні запиту:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">ApolloClient</span><span class="p">,</span> <span class="nx">createHttpLink</span><span class="p">,</span> <span class="nx">InMemoryCache</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@apollo/client&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">setContext</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@apollo/client/link/context&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">httpLink</span> <span class="o">=</span> <span class="nx">createHttpLink</span><span class="p">({</span>
  <span class="nx">uri</span><span class="o">:</span> <span class="s1">&#39;/graphql&#39;</span><span class="p">,</span>
<span class="p">});</span>

<span class="kr">const</span> <span class="nx">authLink</span> <span class="o">=</span> <span class="nx">setContext</span><span class="p">((</span><span class="nx">_</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// отримати токен з локальнохо сховку (якщо він є)</span>
  <span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">);</span>
  <span class="c1">// повернути заголовки в контекст, так щоб httpLink міг прочитати їх</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">headers</span><span class="o">:</span>
           <span class="p">{</span> <span class="p">...</span><span class="nx">headers</span><span class="p">,</span>
             <span class="nx">authorization</span><span class="o">:</span> <span class="nx">token</span> <span class="o">?</span> <span class="sb">`Bearer </span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="p">}</span>
         <span class="p">}</span>
<span class="p">});</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ApolloClient</span><span class="p">({</span>
  <span class="nx">link</span><span class="o">:</span> <span class="nx">authLink</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">httpLink</span><span class="p">),</span>
  <span class="nx">cache</span><span class="o">:</span> <span class="k">new</span> <span class="nx">InMemoryCache</span><span class="p">()</span>
<span class="p">});</span>
</pre></div></div></div>
<div class="paragraph"><p>Сервер може використати цей заголовок для аутентифікації користувача та приєднання його до контексту виконання GraphQL, так що ресолвери можуть модифікувати свою поведінку на основі ролей та дозволів.</p></div>
</div>
<div class="sect2">
<h3 id="_____2">Скидання кешу по виходу</h3>
<div class="paragraph"><p>Оскільки Apollo кешує всі результати запитів, важливо скинути кеш при виході з системи. Найбільш прямий спосіб переконатись що UI і стан сховку відповідають дозволам користувача - це викликати <code>client.resetStore()</code> після кожного входу або виходу користувача. Це пр изведе до зачищення всіх активних запитів, та повторному перевиконанню. Якщо ви хочете тільки очистити кеш, але не виконувати перезавантаження, використовуйте <code>client.clearStore()</code>. Інша опція - перевантажити сторінку, що матиме той самий ефект.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">PROFILE_QUERY</span> <span class="o">=</span> <span class="nx">gql</span><span class="sb">`</span>
<span class="sb">  query CurrentUserForLayout {</span>
<span class="sb">    currentUser {</span>
<span class="sb">      login</span>
<span class="sb">      avatar_url</span>
<span class="sb">    }</span>
<span class="sb">  }</span>
<span class="sb">`</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">Profile</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">client</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">currentUser</span> <span class="p">}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">(</span>
    <span class="nx">PROFILE_QUERY</span><span class="p">,</span>
    <span class="p">{</span> <span class="nx">fetchPolicy</span><span class="o">:</span> <span class="s2">&quot;network-only&quot;</span> <span class="p">}</span>
  <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;navbar-text navbar-right&quot;</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/p&gt;;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;navbar-text navbar-right&quot;</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span>
          <span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span>
          <span class="o">&lt;</span><span class="nx">button</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="p">{</span>
              <span class="c1">// call your auth logout code then reset store</span>
              <span class="nx">App</span><span class="p">.</span><span class="nx">logout</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">client</span><span class="p">.</span><span class="nx">resetStore</span><span class="p">());</span>
            <span class="p">}}</span>
          <span class="o">&gt;</span>
            <span class="nx">Log</span> <span class="nx">out</span>
          <span class="o">&lt;</span><span class="err">/button&gt;</span>
        <span class="o">&lt;</span><span class="err">/p&gt;</span>
      <span class="o">&lt;</span><span class="err">/span&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;navbar-text navbar-right&quot;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;/login/github&quot;</span><span class="o">&gt;</span><span class="nx">Log</span> <span class="k">in</span> <span class="kd">with</span> <span class="nx">GitHub</span><span class="o">&lt;</span><span class="err">/a&gt;</span>
    <span class="o">&lt;</span><span class="err">/p&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2021-06-30 17:19:32 EEST
</div>
</div>
</body>
</html>
