<!DOCTYPE html>
<!-- saved from url=(0058)https://guides.codepath.com/android/using-the-recyclerview -->
<html lang="en" class="gr__guides_codepath_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Using the RecyclerView | CodePath Android Cliffnotes</title><link href="./Using the RecyclerView _ CodePath Android Cliffnotes_files/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="./Using the RecyclerView _ CodePath Android Cliffnotes_files/bootstrap-forms.min.css" rel="stylesheet" type="text/css"><link href="./Using the RecyclerView _ CodePath Android Cliffnotes_files/markdown.css" rel="stylesheet" type="text/css"><link href="./Using the RecyclerView _ CodePath Android Cliffnotes_files/style.css" rel="stylesheet" type="text/css"><meta content="width=device-width, initial-scale=1.0" name="viewport"><script type="text/javascript" async="" src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/linkid.js"></script><script async="" src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/analytics.js"></script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47712505-2', 'codepath.com');
ga('require', 'linkid', 'linkid.js');
ga('require', 'displayfeatures');
ga('send', 'pageview');</script></head><body data-gr-c-s-loaded="true" style="zoom: 1;"><div class="header"><div class="inner-content clearfix"><a class="pull-left" href="https://guides.codepath.com/android"><img height="30" src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/codepath.svg"></a><div class="pull-right"><form action="https://guides.codepath.com/android/search" class="form-inline search" method="get" role="search"><div class="form-group"><input class="form-control" id="query" name="query" placeholder="Search" style="width: 20em;" type="text" value=""><button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button></div></form></div></div></div><div class="container"><div class="row" id="wiki-content"><div class="markdown-toc" style="max-height: 635px; position: absolute; top: 100px; left: 1024.7px; width: 310px; height: 633px;"><div class="title">Jump to Section</div><div class="toc"><div class="toc-title">Table of Contents</div><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#overview">Overview</a></li></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#compared-to-listview">Compared to ListView</a></li></ul></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#components-of-a-recyclerview">Components of a RecyclerView
</a></li></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#layoutmanagers">LayoutManagers</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#recyclerview-adapter">RecyclerView.Adapter</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#itemanimator">ItemAnimator</a></li></ul></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#using-the-recyclerview">Using the RecyclerView</a></li></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#installation">Installation</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#defining-a-model">Defining a Model</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#create-the-recyclerview-within-layout">Create the RecyclerView within Layout</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#creating-the-custom-row-layout">Creating the Custom Row Layout</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#creating-the-recyclerview-adapter">Creating the RecyclerView.Adapter
</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#binding-the-adapter-to-the-recyclerview">Binding the Adapter to the RecyclerView</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#notifying-the-adapter">Notifying the Adapter</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#diffing-larger-changes">Diffing Larger Changes</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#scrolling-to-new-items">Scrolling to New Items</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#implementing-endless-scrolling">Implementing Endless Scrolling</a></li></ul></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#configuring-the-recyclerview">Configuring the RecyclerView</a></li></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#performance">Performance</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#layouts">Layouts</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#decorations">Decorations</a></li></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#grid-spacing-decorations">Grid Spacing Decorations</a></li></ul></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#animators">Animators</a></li></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#new-itemanimator-interface">New ItemAnimator interface</a></li></ul></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#heterogeneous-views">Heterogeneous Views</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#handling-touch-events">Handling Touch Events</a></li></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#snap-to-center-effect">Snap to Center Effect</a></li></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#linearsnaphelper">LinearSnapHelper</a></li></ul></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#snappyrecyclerview">SnappyRecyclerView</a></li></ul></ul></ul></ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-handlers-to-items">Attaching Click Handlers to Items</a></li></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-listeners-with-decorators">Attaching Click Listeners with Decorators</a></li></ul></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#simple-click-handler-within-viewholder">Simple Click Handler within ViewHolder</a></li></ul></ul></ul></ul><ul><ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-handlers-using-listeners">Attaching Click Handlers using Listeners</a></li></ul></ul></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#implementing-pull-to-refresh">Implementing Pull to Refresh</a></li></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#swipe-detection">Swipe Detection</a></li></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#using-uncover-library">Using Uncover library</a></li></ul></ul><ul><ul><li><a href="https://guides.codepath.com/android/using-the-recyclerview#references">References</a></li></ul></ul></div></div><h1 class="col-xs-4 col-sm-9 col-md-9 col-lg-9" id="wiki-title">Using the RecyclerView<div class="page-nav"><a class="btn btn-primary edit-link" href="https://github.com/codepath/android_guides/wiki/using-the-recyclerview/_edit">Edit Page</a><a class="btn btn-primary edit-link" href="https://github.com/codepath/android_guides/wiki/using-the-recyclerview/_history">Page History</a></div></h1><div id="wiki-body"><div class="markdown-body col-xs-6 col-sm-9 col-md-12 col-lg-12"><h2><a class="anchor" id="overview" href="https://guides.codepath.com/android/using-the-recyclerview#overview"><i class="fa fa-link"></i></a>Overview</h2>

<p>The <code>RecyclerView</code> is a new <code>ViewGroup</code> that is prepared to render any adapter-based view in a similar way. It is supposed to be the successor of <a class="internal present" href="https://guides.codepath.com/android/Using-an-ArrayAdapter-with-ListView">ListView</a> and <a href="http://developer.android.com/guide/topics/ui/layout/gridview.html">GridView</a>, and it can be found in the <a href="https://developer.android.com/reference/android/support/v7/app/package-summary.html">latest support-v7 version</a>. One of the reasons is that <code>RecyclerView</code> has a more extensible framework, especially since it provides the ability to implement both horizontal and vertical layouts. Use the <code>RecyclerView</code> widget when you have data collections whose elements change at runtime based on user action or network events.</p>

<p>If you want to use a <code>RecyclerView</code>, you will need to work with the following:</p>

<ul>
<li>
<code>RecyclerView.Adapter</code> - To handle the data collection and bind it to the view</li>
<li>
<code>LayoutManager</code> - Helps in positioning the items</li>
<li>
<code>ItemAnimator</code> - Helps with animating the items for common operations such as Addition or Removal of item</li>
</ul>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/RecyclerView.png" width="500" alt="RecyclerView"></p>

<p>Furthermore, it provides animation support for <code>ListView</code> items whenever they are added or removed, which had been extremely difficult to do in the current implementation.  <code>RecyclerView</code> also begins to enforce the <a class="internal present" href="https://guides.codepath.com/android/Using-an-ArrayAdapter-with-ListView#improving-performance-with-the-viewholder-pattern">ViewHolder pattern</a> too, which was already a recommended practice but now deeply integrated with this new framework.</p>

<p>For more details, see <a href="http://www.grokkingandroid.com/first-glance-androids-recyclerview/">this detailed overview</a>.</p>

<h3><a class="anchor" id="compared-to-listview" href="https://guides.codepath.com/android/using-the-recyclerview#compared-to-listview"><i class="fa fa-link"></i></a>Compared to ListView</h3>

<p><code>RecyclerView</code> differs from its predecessor <code>ListView</code> primarily because of the following features:</p>

<ul>
<li>
<strong>Required ViewHolder in Adapters</strong> - <code>ListView</code> adapters do not require the use of the ViewHolder pattern to improve performance. In contrast, implementing an adapter for <code>RecyclerView</code> requires the use of the ViewHolder pattern for which it uses <code>RecyclerView.Viewholder</code>.</li>
<li>
<strong>Customizable Item Layouts</strong> - <code>ListView</code> can only layout items in a vertical linear arrangement and this cannot be customized. In contrast, the <code>RecyclerView</code> has a <code>RecyclerView.LayoutManager</code> that allows any item layouts including horizontal lists or staggered grids.</li>
<li>
<strong>Easy Item Animations</strong> - <code>ListView</code> contains no special provisions through which one can animate the addition or deletion of items. In contrast, the <code>RecyclerView</code> has the <code>RecyclerView.ItemAnimator</code> class for handling item animations.</li>
<li>
<strong>Manual Data Source</strong> - <code>ListView</code> had adapters for different sources such as <code>ArrayAdapter</code> and <code>CursorAdapter</code> for arrays and database results respectively. In contrast, the <code>RecyclerView.Adapter</code> requires a custom implementation to supply the data to the adapter.</li>
<li>
<strong>Manual Item Decoration</strong> - <code>ListView</code> has the <code>android:divider</code> property for easy dividers between items in the list. In contrast, <code>RecyclerView</code> requires the use of a <code>RecyclerView.ItemDecoration</code> object to setup much more manual divider decorations.</li>
<li>
<strong>Manual Click Detection</strong> - <code>ListView</code> has a <code>AdapterView.OnItemClickListener</code> interface for binding to the click events for individual items in the list. In contrast, <code>RecyclerView</code> only has support for <code>RecyclerView.OnItemTouchListener</code> which manages individual touch events but has no built-in click handling.</li>
</ul>

<h2><a class="anchor" id="components-of-a-recyclerview" href="https://guides.codepath.com/android/using-the-recyclerview#components-of-a-recyclerview"><i class="fa fa-link"></i></a>Components of a <code>RecyclerView</code>
</h2>

<h3><a class="anchor" id="layoutmanagers" href="https://guides.codepath.com/android/using-the-recyclerview#layoutmanagers"><i class="fa fa-link"></i></a><code>LayoutManagers</code></h3>

<p>A <code>RecyclerView</code> needs to have a layout manager and an adapter to be instantiated. A layout manager positions item views inside a <code>RecyclerView</code> and determines when to reuse item views that are no longer visible to the user.</p>

<p><a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html">RecyclerView</a> provides these built-in layout managers:</p>

<ul>
<li>
<code>LinearLayoutManager</code> shows items in a vertical or horizontal scrolling list.</li>
<li>
<code>GridLayoutManager</code> shows items in a grid.</li>
<li>
<code>StaggeredGridLayoutManager</code> shows items in a staggered grid.</li>
</ul>

<p>To create a custom layout manager, extend the <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.LayoutManager.html">RecyclerView.LayoutManager</a> class.</p>

<p>Here is <a href="https://www.youtube.com/watch?v=gs_C1E8HwvE&amp;index=22&amp;list=WL">Dave Smith's talk</a> on custom layout manager</p>

<blockquote>
<p><strong>Notes</strong>: In recent version of the Support Library, if you don't explicitly set the LayoutManager, the RecyclerView will not show! There is a Logcat error though <code>E/RecyclerView: No layout manager attached; skipping layout</code></p>
</blockquote>

<h3><a class="anchor" id="recyclerview-adapter" href="https://guides.codepath.com/android/using-the-recyclerview#recyclerview-adapter"><i class="fa fa-link"></i></a><code>RecyclerView.Adapter</code></h3>

<p><code>RecyclerView</code> includes a new kind of adapter. It’s a similar approach to the ones you already used, but with some peculiarities, such as a required <code>ViewHolder</code>. You will have to override two main methods: one to inflate the view and its view holder, and another one to bind data to the view. The good thing about this is that first method is called only when we really need to create a new view. No need to check if it’s being recycled.</p>

<h3><a class="anchor" id="itemanimator" href="https://guides.codepath.com/android/using-the-recyclerview#itemanimator"><i class="fa fa-link"></i></a><code>ItemAnimator</code></h3>

<p><code>RecyclerView.ItemAnimator</code> will animate <code>ViewGroup</code> modifications such as add/delete/select that are notified to adapter. <code>DefaultItemAnimator</code> can be used for basic default animations and works quite well.  See the <a class="internal present" href="https://guides.codepath.com/android/Using-the-RecyclerView#animators">section</a> of this guide for more information.</p>

<h2><a class="anchor" id="using-the-recyclerview" href="https://guides.codepath.com/android/using-the-recyclerview#using-the-recyclerview"><i class="fa fa-link"></i></a>Using the RecyclerView</h2>

<p>Using a <code>RecyclerView</code> has the following key steps:</p>

<ol>
<li>Add <code>RecyclerView</code> support library to the gradle build file</li>
<li>Define a model class to use as the data source</li>
<li>Add a <code>RecyclerView</code> to your activity to display the items</li>
<li>Create a custom row layout XML file to visualize the item</li>
<li>Create a <code>RecyclerView.Adapter</code> and <code>ViewHolder</code> to render the item</li>
<li>Bind the adapter to the data source to populate the <code>RecyclerView</code>
</li>
</ol>

<p>The steps are explained in more detail below.</p>

<h3><a class="anchor" id="installation" href="https://guides.codepath.com/android/using-the-recyclerview#installation"><i class="fa fa-link"></i></a>Installation</h3>

<p>Make sure the RecyclerView support library is listed as a dependency in your <code>app/build.gradle</code>:</p>

<pre class="highlight" data-lang="Groovy"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">compile</span> <span class="s1">'com.android.support:recyclerview-v7:25.3.1'</span>
<span class="o">}</span></code></pre>


<p>Click on "Sync Project with Gradle files" to let your IDE download the appropriate resources.</p>

<h3><a class="anchor" id="defining-a-model" href="https://guides.codepath.com/android/using-the-recyclerview#defining-a-model"><i class="fa fa-link"></i></a>Defining a Model</h3>

<p>Every RecyclerView is backed by a source for data. In this case, we will define a <code>Contact</code> class which represents the data model being displayed by the RecyclerView:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Contact</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">mName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">mOnline</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Contact</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">online</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mName</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="n">mOnline</span> <span class="o">=</span> <span class="n">online</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isOnline</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mOnline</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">lastContactId</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="nf">createContactsList</span><span class="o">(</span><span class="kt">int</span> <span class="n">numContacts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">contacts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">numContacts</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">contacts</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Contact</span><span class="o">(</span><span class="s">"Person "</span> <span class="o">+</span> <span class="o">++</span><span class="n">lastContactId</span><span class="o">,</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">numContacts</span> <span class="o">/</span> <span class="mi">2</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">contacts</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<h3><a class="anchor" id="create-the-recyclerview-within-layout" href="https://guides.codepath.com/android/using-the-recyclerview#create-the-recyclerview-within-layout"><i class="fa fa-link"></i></a>Create the RecyclerView within Layout</h3>

<p>Inside the desired activity layout XML file in <code>res/layout/activity_users.xml</code>, let's add the <code>RecyclerView</code> from the support library:</p>

<pre class="highlight" data-lang="XML"><code><span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="nt">&gt;</span>

    <span class="nt">&lt;android.support.v7.widget.RecyclerView</span>
      <span class="na">android:id=</span><span class="s">"@+id/rvContacts"</span>
      <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
      <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/RelativeLayout&gt;</span></code></pre>


<p>In the layout, preview we can see the <code>RecyclerView</code> within the activity:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/Qf5fQ8X.png" width="300"></p>

<p>Now the <code>RecyclerView</code> is embedded within our activity layout file. Next, we can define the layout for each item within our list.</p>

<h3><a class="anchor" id="creating-the-custom-row-layout" href="https://guides.codepath.com/android/using-the-recyclerview#creating-the-custom-row-layout"><i class="fa fa-link"></i></a>Creating the Custom Row Layout</h3>

<p>Before we create the adapter, let's define the XML layout file that will be used for each row within the list. This item layout for now should contain a horizontal linear layout with a textview for the name and a button to message the person:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/wPRTc76.png" width="300">
<img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/fu3FzsV.png" width="300"></p>

<p>This layout file can be created in <code>res/layout/item_contact.xml</code> and will be rendered for each item row.  <strong>Note</strong> that you should be using <code>wrap_content</code> for the <code>layout_height</code> because <code>RecyclerView</code> versions prior to <code>23.2.1</code> previously ignored layout parameters.  See <a href="http://android-developers.blogspot.com/2016/02/android-support-library-232.html">this link</a> for more context.</p>

<pre class="highlight" data-lang="XML"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
        <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
        <span class="na">android:orientation=</span><span class="s">"horizontal"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:paddingTop=</span><span class="s">"10dp"</span>
        <span class="na">android:paddingBottom=</span><span class="s">"10dp"</span>
        <span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/contact_name"</span>
        <span class="na">android:layout_width=</span><span class="s">"0dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_weight=</span><span class="s">"1"</span>
        <span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">"@+id/message_button"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:paddingLeft=</span><span class="s">"16dp"</span>
        <span class="na">android:paddingRight=</span><span class="s">"16dp"</span>
        <span class="na">android:textSize=</span><span class="s">"10sp"</span>
        <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span></code></pre>


<p>With the custom item layout complete, let's create the adapter to populate the data into the recycler view.</p>

<h3><a class="anchor" id="creating-the-recyclerview-adapter" href="https://guides.codepath.com/android/using-the-recyclerview#creating-the-recyclerview-adapter"><i class="fa fa-link"></i></a>Creating the <code>RecyclerView.Adapter</code>
</h3>

<p>Here we need to create the adapter which will actually populate the data into the RecyclerView. The adapter's role is to <strong>convert an object at a position into a list row item</strong> to be inserted.</p>

<p>However with a <code>RecyclerView</code> the adapter requires the existence of a "ViewHolder" object which describes and provides access to all the views within each item row.  We can create the basic empty adapter and holder together in <code>ContactsAdapter.java</code> as follows:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// Create the basic adapter extending from RecyclerView.Adapter</span>
<span class="c1">// Note that we specify the custom ViewHolder which gives us access to our views</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span>
    <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="c1">// Provide a direct reference to each of the views within a data item</span>
    <span class="c1">// Used to cache the views within the item layout for fast access</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
        <span class="c1">// Your holder should contain a member variable</span>
        <span class="c1">// for any view that will be set as you render a row</span>
        <span class="kd">public</span> <span class="n">TextView</span> <span class="n">nameTextView</span><span class="o">;</span>
        <span class="kd">public</span> <span class="n">Button</span> <span class="n">messageButton</span><span class="o">;</span>

        <span class="c1">// We also create a constructor that accepts the entire item row</span>
        <span class="c1">// and does the view lookups to find each subview</span>
        <span class="kd">public</span> <span class="nf">ViewHolder</span><span class="o">(</span><span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Stores the itemView in a public final member variable that can be used</span>
            <span class="c1">// to access the context from any ViewHolder instance.</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>

            <span class="n">nameTextView</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">contact_name</span><span class="o">);</span>
            <span class="n">messageButton</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">message_button</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>Now that we've defined the basic adapter and <code>ViewHolder</code>, we need to begin filling in our adapter. First, let's store a member variable for the list of contacts and pass the list in through our constructor:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span>
    <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="c1">// ... view holder defined above...</span>

    <span class="c1">// Store a member variable for the contacts</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">mContacts</span><span class="o">;</span>
    <span class="c1">// Store the context for easy access</span>
    <span class="kd">private</span> <span class="n">Context</span> <span class="n">mContext</span><span class="o">;</span>

    <span class="c1">// Pass in the contact array into the constructor</span>
    <span class="kd">public</span> <span class="nf">ContactsAdapter</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">contacts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mContacts</span> <span class="o">=</span> <span class="n">contacts</span><span class="o">;</span>
        <span class="n">mContext</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Easy access to the context object in the recyclerview</span>
    <span class="kd">private</span> <span class="n">Context</span> <span class="nf">getContext</span><span class="o">()</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">mContext</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>Every adapter has three primary methods: <code>onCreateViewHolder</code> to inflate the item layout and create the holder, <code>onBindViewHolder</code> to set the view attributes based on the data and <code>getItemCount</code> to determine the number of items. We need to implement all three to finish the adapter:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span>
    <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="c1">// ... constructor and member variables</span>

    <span class="c1">// Usually involves inflating a layout from XML and returning the holder</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="nf">onCreateViewHolder</span><span class="o">(</span><span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="na">getContext</span><span class="o">();</span>
        <span class="n">LayoutInflater</span> <span class="n">inflater</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>

        <span class="c1">// Inflate the custom layout</span>
        <span class="n">View</span> <span class="n">contactView</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">item_contact</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

        <span class="c1">// Return a new holder instance</span>
        <span class="n">ViewHolder</span> <span class="n">viewHolder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ViewHolder</span><span class="o">(</span><span class="n">contactView</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">viewHolder</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Involves populating data into the item through holder</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">viewHolder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Get the data model based on position</span>
        <span class="n">Contact</span> <span class="n">contact</span> <span class="o">=</span> <span class="n">mContacts</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>

        <span class="c1">// Set item views based on your views and data model</span>
        <span class="n">TextView</span> <span class="n">textView</span> <span class="o">=</span> <span class="n">viewHolder</span><span class="o">.</span><span class="na">nameTextView</span><span class="o">;</span>
        <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">contact</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="n">viewHolder</span><span class="o">.</span><span class="na">messageButton</span><span class="o">;</span>
        <span class="n">button</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">contact</span><span class="o">.</span><span class="na">isOnline</span><span class="o">()</span> <span class="o">?</span> <span class="s">"Message"</span> <span class="o">:</span> <span class="s">"Offline"</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">setEnabled</span><span class="o">(</span><span class="n">contact</span><span class="o">.</span><span class="na">isOnline</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// Returns the total count of items in the list</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mContacts</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>With the adapter completed, all that is remaining is to bind the data from the adapter into the RecyclerView.</p>

<h3><a class="anchor" id="binding-the-adapter-to-the-recyclerview" href="https://guides.codepath.com/android/using-the-recyclerview#binding-the-adapter-to-the-recyclerview"><i class="fa fa-link"></i></a>Binding the Adapter to the RecyclerView</h3>

<p>In our activity, we will populate a set of sample users which should be displayed in the <code>RecyclerView</code>.</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserListActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>

     <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">contacts</span><span class="o">;</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
         <span class="c1">// ...</span>
         <span class="c1">// Lookup the recyclerview in activity layout</span>
         <span class="n">RecyclerView</span> <span class="n">rvContacts</span> <span class="o">=</span> <span class="o">(</span><span class="n">RecyclerView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">rvContacts</span><span class="o">);</span>

         <span class="c1">// Initialize contacts</span>
         <span class="n">contacts</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="na">createContactsList</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
         <span class="c1">// Create adapter passing in the sample user data</span>
         <span class="n">ContactsAdapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContactsAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">contacts</span><span class="o">);</span>
         <span class="c1">// Attach the adapter to the recyclerview to populate items</span>
         <span class="n">rvContacts</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">adapter</span><span class="o">);</span>
         <span class="c1">// Set layout manager to position the items</span>
         <span class="n">rvContacts</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="k">new</span> <span class="n">LinearLayoutManager</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
         <span class="c1">// That's all!</span>
     <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>Finally, compile and run the app and you should see something like the screenshot below. If you create enough items and scroll through the list, the views will be recycled and far smoother by default than the <code>ListView</code> widget:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/vbIL5HA.gif" width="400" alt="Screenshot"></p>

<h3><a class="anchor" id="notifying-the-adapter" href="https://guides.codepath.com/android/using-the-recyclerview#notifying-the-adapter"><i class="fa fa-link"></i></a>Notifying the Adapter</h3>

<p>Unlike ListView, there is no way to add or remove items directly through the <code>RecyclerView</code> adapter.  You need to make changes to the data source directly and notify the adapter of any changes.   Also, whenever adding or removing elements, always make changes to the <strong>existing</strong> list.  For instance, reinitializing the list of Contacts such as the following will not affect the adapter, since it has a memory reference to the old list:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// do not reinitialize an existing reference used by an adapter</span>
<span class="n">contacts</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="na">createContactsList</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span></code></pre>


<p>Instead, you need to act directly on the existing reference:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// add to the existing list</span>
<span class="n">contacts</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">Contact</span><span class="o">.</span><span class="na">createContactsList</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span></code></pre>


<p>There are many method available to use when notifying the adapter of different changes:</p>

<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>notifyItemChanged(int pos)</code></td>
<td>Notify that item at position has changed.</td>
</tr>
<tr>
<td><code>notifyItemInserted(int pos)</code></td>
<td>Notify that item reflected at position has been newly inserted.</td>
</tr>
<tr>
<td><code>notifyItemRemoved(int pos)</code></td>
<td>Notify that items previously located at position has been removed from the data set.</td>
</tr>
<tr>
<td><code>notifyDataSetChanged()</code></td>
<td>Notify that the dataset has changed.  Use only as last resort.</td>
</tr>
</tbody>
</table>

<p>We can use these from the activity or fragment:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// Add a new contact</span>
<span class="n">contacts</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="k">new</span> <span class="n">Contact</span><span class="o">(</span><span class="s">"Barney"</span><span class="o">,</span> <span class="kc">true</span><span class="o">));</span>
<span class="c1">// Notify the adapter that an item was inserted at position 0</span>
<span class="n">adapter</span><span class="o">.</span><span class="na">notifyItemInserted</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></code></pre>


<p>Every time we want to add or remove items from the RecyclerView, we will need to explicitly inform to the adapter of the event.  Unlike the ListView adapter, a RecyclerView adapter should not rely on <code>notifyDataSetChanged()</code> since the more granular actions should be used.  See the <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter.html">API documentation</a> for more details.</p>

<p>Also, if you are intending to update an existing list, make sure to get the current count of items before making any changes.  For instance, a <code>getItemCount()</code> on the adapter should be called to record the first index that will be changed.</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// record this value before making any changes to the existing list</span>
<span class="kt">int</span> <span class="n">curSize</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="na">getItemCount</span><span class="o">();</span>

<span class="c1">// replace this line with wherever you get new records</span>
<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">newItems</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="na">createContactsList</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>

<span class="c1">// update the existing list</span>
<span class="n">contacts</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">newItems</span><span class="o">);</span>
<span class="c1">// curSize should represent the first element that got added</span>
<span class="c1">// newItems.size() represents the itemCount</span>
<span class="n">adapter</span><span class="o">.</span><span class="na">notifyItemRangeInserted</span><span class="o">(</span><span class="n">curSize</span><span class="o">,</span> <span class="n">newItems</span><span class="o">.</span><span class="na">size</span><span class="o">());</span></code></pre>


<h3><a class="anchor" id="diffing-larger-changes" href="https://guides.codepath.com/android/using-the-recyclerview#diffing-larger-changes"><i class="fa fa-link"></i></a>Diffing Larger Changes</h3>

<p>Often times there are cases when changes to your list are more complex (i.e. sorting an existing list) and it cannot be easily determined whether each row changed.  In this cases, you would normally have to call <code>notifyDataSetChanged()</code> on the entire adapter to update the entire screen, which eliminates the ability to perform animation sequences to showcase what changed.</p>

<p>A new <code>DiffUtil</code> class has been added in the v24.2.0 of the support library to help compute the difference between the old and new list.   This class uses the same algorithm used for computing line changes in source code (the <a href="https://en.wikipedia.org/wiki/Diff_utility">diff utility</a> program), so it usually fairly fast.  It is recommended however for larger lists that you execute this computation in a background thread.</p>

<p>To use the <code>DiffUtil</code> class, you need to first implement a class that implements the <code>DiffUtil.Callback</code> that accepts the old and new list:</p>

<pre class="highlight" data-lang="Java"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactDiffCallback</span> <span class="kd">extends</span> <span class="n">DiffUtil</span><span class="o">.</span><span class="na">Callback</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">mOldList</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">mNewList</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ContactDiffCallback</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">oldList</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">newList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mOldList</span> <span class="o">=</span> <span class="n">oldList</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mNewList</span> <span class="o">=</span> <span class="n">newList</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getOldListSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mOldList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getNewListSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mNewList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">areItemsTheSame</span><span class="o">(</span><span class="kt">int</span> <span class="n">oldItemPosition</span><span class="o">,</span> <span class="kt">int</span> <span class="n">newItemPosition</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// add a unique ID property on Contact and expose a getId() method</span>
        <span class="k">return</span> <span class="n">mOldList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">oldItemPosition</span><span class="o">).</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="n">mNewList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">newItemPosition</span><span class="o">).</span><span class="na">getId</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">areContentsTheSame</span><span class="o">(</span><span class="kt">int</span> <span class="n">oldItemPosition</span><span class="o">,</span> <span class="kt">int</span> <span class="n">newItemPosition</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Contact</span> <span class="n">oldContact</span> <span class="o">=</span> <span class="n">mOldList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">oldItemPosition</span><span class="o">);</span>
        <span class="n">Contact</span> <span class="n">newContact</span> <span class="o">=</span> <span class="n">mNewList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">newItemPosition</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">oldContact</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">==</span> <span class="n">newContact</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">oldContact</span><span class="o">.</span><span class="na">isOnline</span><span class="o">()</span> <span class="o">==</span> <span class="n">newContact</span><span class="o">.</span><span class="na">isOnline</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>Next, you would implement a <code>swapItems()</code> method on your adapter to perform the diff and then invoke <code>dispatchUpdates()</code> to notify the adapter whether the element was inserted, removed, moved, or changed:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span>
        <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">swapItems</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="n">contacts</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// compute diffs</span>
        <span class="kd">final</span> <span class="n">ContactDiffCallback</span> <span class="n">diffCallback</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContactDiffCallback</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mContacts</span><span class="o">,</span> <span class="n">contacts</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">DiffUtil</span><span class="o">.</span><span class="na">DiffResult</span> <span class="n">diffResult</span> <span class="o">=</span> <span class="n">DiffUtil</span><span class="o">.</span><span class="na">calculateDiff</span><span class="o">(</span><span class="n">diffCallback</span><span class="o">);</span>

        <span class="c1">// clear contacts and add</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mContacts</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mContacts</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">contacts</span><span class="o">);</span>

        <span class="n">diffResult</span><span class="o">.</span><span class="na">dispatchUpdatesTo</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// calls adapter's notify methods after diff is computed</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>


<p>For a working example, see this <a href="https://github.com/mrmike/DiffUtil-sample">sample code</a>.</p>

<h3><a class="anchor" id="scrolling-to-new-items" href="https://guides.codepath.com/android/using-the-recyclerview#scrolling-to-new-items"><i class="fa fa-link"></i></a>Scrolling to New Items</h3>

<p>If we are inserting elements to the front of the list and wish to maintain the position at the top, we can set the scroll position to the 1st element:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">adapter</span><span class="o">.</span><span class="na">notifyItemInserted</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">rvContacts</span><span class="o">.</span><span class="na">scrollToPosition</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>   <span class="c1">// index 0 position</span></code></pre>


<p>If we are adding items to the end and wish to scroll to the bottom as items are added, we can notify the adapter that an additional element has been added and can call <code>smoothScrollToPosition()</code> on the RecyclerView:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">adapter</span><span class="o">.</span><span class="na">notifyItemInserted</span><span class="o">(</span><span class="n">contacts</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>  <span class="c1">// contacts.size() - 1 is the last element position</span>
<span class="n">rvContacts</span><span class="o">.</span><span class="na">scrollToPosition</span><span class="o">(</span><span class="n">mAdapter</span><span class="o">.</span><span class="na">getItemCount</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// update based on adapter</span></code></pre>


<h3><a class="anchor" id="implementing-endless-scrolling" href="https://guides.codepath.com/android/using-the-recyclerview#implementing-endless-scrolling"><i class="fa fa-link"></i></a>Implementing Endless Scrolling</h3>

<p>To implement fetching more data and appending to the end of the list as the user scrolls towards the bottom,  use the <code>addOnScrollListener()</code> from the <code>RecyclerView</code> and add an <code>onLoadMore</code> method leveraging the <a class="internal present" href="https://guides.codepath.com/android/Endless-Scrolling-with-AdapterViews-and-RecyclerView#implementing-with-recyclerview">EndlessScrollViewScrollListener</a> document in the guide.</p>

<h2><a class="anchor" id="configuring-the-recyclerview" href="https://guides.codepath.com/android/using-the-recyclerview#configuring-the-recyclerview"><i class="fa fa-link"></i></a>Configuring the RecyclerView</h2>

<p>The <code>RecyclerView</code> is quite flexible and customizable. Several of the options available are shown below.</p>

<h3><a class="anchor" id="performance" href="https://guides.codepath.com/android/using-the-recyclerview#performance"><i class="fa fa-link"></i></a>Performance</h3>

<p>We can also enable optimizations if the items are static and will not change for significantly smoother scrolling:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">recyclerView</span><span class="o">.</span><span class="na">setHasFixedSize</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span></code></pre>


<h3><a class="anchor" id="layouts" href="https://guides.codepath.com/android/using-the-recyclerview#layouts"><i class="fa fa-link"></i></a>Layouts</h3>

<p>The positioning of the items is configured using the layout manager. By default, we can choose between <code>LinearLayoutManager</code>, <code>GridLayoutManager</code>, and <code>StaggeredGridLayoutManager</code>. Linear displays items either vertically or horizontally:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// Setup layout manager for items with orientation</span>
<span class="c1">// Also supports `LinearLayoutManager.HORIZONTAL`</span>
<span class="n">LinearLayoutManager</span> <span class="n">layoutManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearLayoutManager</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">LinearLayoutManager</span><span class="o">.</span><span class="na">VERTICAL</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
<span class="c1">// Optionally customize the position you want to default scroll to</span>
<span class="n">layoutManager</span><span class="o">.</span><span class="na">scrollToPosition</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="c1">// Attach layout manager to the RecyclerView</span>
<span class="n">recyclerView</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="n">layoutManager</span><span class="o">);</span></code></pre>


<p>Displaying items in a grid or staggered grid works similarly:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// First param is number of columns and second param is orientation i.e Vertical or Horizontal</span>
<span class="n">StaggeredGridLayoutManager</span> <span class="n">gridLayoutManager</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nf">StaggeredGridLayoutManager</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">StaggeredGridLayoutManager</span><span class="o">.</span><span class="na">VERTICAL</span><span class="o">);</span>
<span class="c1">// Attach the layout manager to the recycler view</span>
<span class="n">recyclerView</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="n">gridLayoutManager</span><span class="o">);</span></code></pre>


<p>For example, a staggered grid might look like:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/AlANFgj.png" width="300" alt="Screenshot"></p>

<p>We can build <a href="http://wiresareobsolete.com/2014/09/building-a-recyclerview-layoutmanager-part-1/">our own custom layout managers</a> as outlined there.</p>

<h3><a class="anchor" id="decorations" href="https://guides.codepath.com/android/using-the-recyclerview#decorations"><i class="fa fa-link"></i></a>Decorations</h3>

<p>We can decorate the items using various decorators attached to the recyclerview such as the <a href="https://developer.android.com/reference/android/support/v7/widget/DividerItemDecoration.html">DividerItemDecoration</a>:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">RecyclerView</span><span class="o">.</span><span class="na">ItemDecoration</span> <span class="n">itemDecoration</span> <span class="o">=</span> <span class="k">new</span>
    <span class="n">DividerItemDecoration</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">DividerItemDecoration</span><span class="o">.</span><span class="na">VERTICAL</span><span class="o">);</span>
<span class="n">recyclerView</span><span class="o">.</span><span class="na">addItemDecoration</span><span class="o">(</span><span class="n">itemDecoration</span><span class="o">);</span></code></pre>


<p>This decorator displays dividers between each item within the list as illustrated below:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/penvJxw.png" width="400" alt="Screenshot"></p>

<h4><a class="anchor" id="grid-spacing-decorations" href="https://guides.codepath.com/android/using-the-recyclerview#grid-spacing-decorations"><i class="fa fa-link"></i></a>Grid Spacing Decorations</h4>

<p>Decorators can also be used for adding consistent spacing around items displayed in a grid layout or staggered grid. Copy over this <a href="https://gist.github.com/nesquena/db922669798eba3e3661">SpacesItemDecoration.java decorator</a> into your project and apply to a <code>RecyclerView</code> using the <code>addItemDecoration</code> method. Refer to <a href="http://blog.grafixartist.com/pinterest-masonry-layout-staggered-grid/">this staggered grid tutorial</a> for a more detailed outline.</p>

<h3><a class="anchor" id="animators" href="https://guides.codepath.com/android/using-the-recyclerview#animators"><i class="fa fa-link"></i></a>Animators</h3>

<p>RecyclerView supports custom animations for items as they enter, move, or get deleted using <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ItemAnimator.html">ItemAnimator</a>.  The default animation effects is defined by <a href="https://developer.android.com/reference/android/support/v7/widget/DefaultItemAnimator.html">DefaultItemAnimator</a>, and the complex implementation (see <a href="https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v7/recyclerview/src/android/support/v7/widget/DefaultItemAnimator.java">source code)</a> shows that the logic necessary to ensure that animation effects are performed in a specific sequence (remove, move, and add).</p>

<p>Currently, the fastest way to implement animations with RecyclerView is to use third-party libraries.  The <a href="https://github.com/wasabeef/recyclerview-animators">third-party recyclerview-animators library</a> contains a lot of animations that you can use without needing to build your own.  Simply edit your  <code>app/build.gradle</code>:</p>

<pre class="highlight" data-lang="Groovy"><code><span class="n">repositories</span> <span class="o">{</span>
    <span class="n">jcenter</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">//If you are using a RecyclerView 23.1.0 or higher.</span>
<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">'jp.wasabeef:recyclerview-animators:2.2.3'</span>
<span class="o">}</span>

<span class="c1">//If you are using a RecyclerView 23.0.1 or below.</span>
<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">'jp.wasabeef:recyclerview-animators:1.3.0'</span>
<span class="o">}</span></code></pre>


<p>Next, we can use any of the defined animators to change the behavior of our RecyclerView:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">recyclerView</span><span class="o">.</span><span class="na">setItemAnimator</span><span class="o">(</span><span class="k">new</span> <span class="n">SlideInUpAnimator</span><span class="o">());</span></code></pre>


<p>For example, here's scrolling through a list after customizing the animation:</p>

<p><img src="https://i.imgur.com/v0VyQS8.gif" width="300" alt="Screenshot"></p>

<p>For a further look into defining custom item animators, check out this <a href="https://hackmd.io/s/r1IEQ-jAl">custom RecyclerView item animation post</a>.</p>

<h4><a class="anchor" id="new-itemanimator-interface" href="https://guides.codepath.com/android/using-the-recyclerview#new-itemanimator-interface"><i class="fa fa-link"></i></a>New ItemAnimator interface</h4>

<p>Starting in the <a href="https://developer.android.com/tools/support-library/index.html#revisions">support v23.1.0</a> library for <code>RecyclerView</code>, there is also a new interface for the <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ItemAnimator.html#pubmethods">ItemAnimator</a> interface.   The old interface has now been deprecated to <code>SimpleItemAnimator</code> .  This library adds a <a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ItemAnimator.ItemHolderInfo.html">ItemHolderInfo</a> class, which appears to be similar to the <a href="https://github.com/android/platform_frameworks_support/blob/master/v7/recyclerview/src/android/support/v7/widget/DefaultItemAnimator.java#L53-L63">MoveInfo</a> class defined by <code>DefaultItemAnimator</code> but used more generically to pass state information between animation transition states.  It is likely that the next version of <code>DefaultItemAnimator</code> will be simplified to use this new class and revised interface.</p>

<h3><a class="anchor" id="heterogeneous-views" href="https://guides.codepath.com/android/using-the-recyclerview#heterogeneous-views"><i class="fa fa-link"></i></a>Heterogeneous Views</h3>

<p>See <a class="internal present" href="https://guides.codepath.com/android/Heterogenous-Layouts-inside-RecyclerView">this guide</a> if you want to inflate multiple types of rows inside a single <code>RecyclerView</code>:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/HyOAOOu.png" width="300" alt="ss2"></p>

<p>This is useful for feeds which contain various different types of items within a single list.</p>

<h3><a class="anchor" id="handling-touch-events" href="https://guides.codepath.com/android/using-the-recyclerview#handling-touch-events"><i class="fa fa-link"></i></a>Handling Touch Events</h3>

<p>RecyclerView allows us to handle touch events with:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">recyclerView</span><span class="o">.</span><span class="na">addOnItemTouchListener</span><span class="o">(</span><span class="k">new</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">OnItemTouchListener</span><span class="o">()</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTouchEvent</span><span class="o">(</span><span class="n">RecyclerView</span> <span class="n">recycler</span><span class="o">,</span> <span class="n">MotionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Handle on touch events here</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onInterceptTouchEvent</span><span class="o">(</span><span class="n">RecyclerView</span> <span class="n">recycler</span><span class="o">,</span> <span class="n">MotionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">});</span></code></pre>


<h3><a class="anchor" id="snap-to-center-effect" href="https://guides.codepath.com/android/using-the-recyclerview#snap-to-center-effect"><i class="fa fa-link"></i></a>Snap to Center Effect</h3>

<p>In certain cases, we might want a horizontal <code>RecyclerView</code> that allows the user to scroll through a list of items. As the user scrolls, we might want items to "snap to center" as they are revealed. Such as in this example:</p>

<p><img src="https://i.imgur.com/D5crJK4.gif" width="300"></p>

<h4><a class="anchor" id="linearsnaphelper" href="https://guides.codepath.com/android/using-the-recyclerview#linearsnaphelper"><i class="fa fa-link"></i></a>LinearSnapHelper</h4>

<p>To achieve this snapping to center effect as the user scrolls, starting with support library 24.2.0 version and greater, we can use the built-in <a href="https://developer.android.com/reference/android/support/v7/widget/LinearSnapHelper.html">LinearSnapHelper</a> as follows:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">SnapHelper</span> <span class="n">snapHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearSnapHelper</span><span class="o">();</span>
<span class="n">snapHelper</span><span class="o">.</span><span class="na">attachToRecyclerView</span><span class="o">(</span><span class="n">recyclerView</span><span class="o">);</span></code></pre>


<p>For more sophisticated snapping behavior, <a href="https://rubensousa.github.io/2016/08/recyclerviewsnap">read more about customizing these helpers</a> and <a href="https://github.com/rubensousa/RecyclerViewSnap/">review related sample code here</a>.</p>

<h4><a class="anchor" id="snappyrecyclerview" href="https://guides.codepath.com/android/using-the-recyclerview#snappyrecyclerview"><i class="fa fa-link"></i></a>SnappyRecyclerView</h4>

<p>For a more manual approach, we can create a custom extension to <code>RecyclerView</code> called <code>SnappyRecyclerView</code> which will snap items to center as the user scrolls:</p>

<ol>
<li>Copy over the code from <a href="https://gist.github.com/nesquena/b26f9a253bbbb6a2e4890891e8a57eb9">SnappyRecyclerView.java</a> to your project.</li>
<li>Configure your new <code>SnappyRecyclerView</code> with a horizontal <code>LinearLayoutManager</code>:</li>
</ol>

<pre class="highlight" data-lang="Java"><code><span class="n">LinearLayoutManager</span> <span class="n">layoutManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearLayoutManager</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">LinearLayoutManager</span><span class="o">.</span><span class="na">HORIZONTAL</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
<span class="n">snappyRecyclerView</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="n">layoutManager</span><span class="o">);</span></code></pre>


<ol>
<li>Attach your adapter to the <code>RecyclerView</code> to populate the data into the horizontal list as normal.</li>
<li>You can access the currently "snapped" item position with <code>snappyRecyclerView.getFirstVisibleItemPosition()</code>.</li>
</ol>

<p>That's all, you should be set for a snap-to-center horizontal scrolling list!</p>

<h3><a class="anchor" id="attaching-click-handlers-to-items" href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-handlers-to-items"><i class="fa fa-link"></i></a>Attaching Click Handlers to Items</h3>

<h4><a class="anchor" id="attaching-click-listeners-with-decorators" href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-listeners-with-decorators"><i class="fa fa-link"></i></a>Attaching Click Listeners with Decorators</h4>

<p>Then easiest solution for setting up item click handlers within a <code>RecyclerView</code> is to use a decorator class to manage the item click listener. With <a href="https://gist.github.com/nesquena/231e356f372f214c4fe6">this clever <code>ItemClickSupport</code> decorator</a>, attaching a click handler can be done with:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">ItemClickSupport</span><span class="o">.</span><span class="na">addTo</span><span class="o">(</span><span class="n">mRecyclerView</span><span class="o">).</span><span class="na">setOnItemClickListener</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">ItemClickSupport</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onItemClicked</span><span class="o">(</span><span class="n">RecyclerView</span> <span class="n">recyclerView</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">// do it</span>
      <span class="o">}</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre>


<p>Under the covers, this is wrapping the interface pattern described in detail below. If you apply this code above, you <strong>don't need to any of the manual item click handling below</strong>. This technique was originally <a href="http://www.littlerobots.nl/blog/Handle-Android-RecyclerView-Clicks/">outlined in this article</a>.</p>

<h4><a class="anchor" id="simple-click-handler-within-viewholder" href="https://guides.codepath.com/android/using-the-recyclerview#simple-click-handler-within-viewholder"><i class="fa fa-link"></i></a>Simple Click Handler within ViewHolder</h4>

<p>RecyclerView does not have special provisions for attaching click handlers to items unlike ListView which has the method <code>setOnItemClickListener</code>. To achieve a similar effect manually (instead of using the decorator utility above), we can attach click events within the <code>ViewHolder</code> inside our adapter:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// Used to cache the views within the item layout for fast access</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="kd">implements</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="n">TextView</span> <span class="n">tvName</span><span class="o">;</span>
        <span class="kd">public</span> <span class="n">TextView</span> <span class="n">tvHometown</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Context</span> <span class="n">context</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">ViewHolder</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">tvName</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvName</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">tvHometown</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvHometown</span><span class="o">);</span>
            <span class="c1">// Store the context</span>
            <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
            <span class="c1">// Attach a click listener to the entire row view</span>
            <span class="n">itemView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// Handles the row being being clicked</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">position</span> <span class="o">=</span> <span class="n">getAdapterPosition</span><span class="o">();</span> <span class="c1">// gets item position</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">position</span> <span class="o">!=</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">NO_POSITION</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// Check if an item was deleted, but the user clicked it before the UI removed it</span>
                <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
                <span class="c1">// We can access the data within the views</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">tvName</span><span class="o">.</span><span class="na">getText</span><span class="o">(),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>


<p>If we want the item to show a "selected" effect when pressed, we can set the <code>android:background</code> of <strong>the root layout for the row</strong> to <code>?android:attr/selectableItemBackground</code>:</p>

<pre class="highlight" data-lang="XML"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:orientation=</span><span class="s">"horizontal"</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:background=</span><span class="s">"?android:attr/selectableItemBackground"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span></code></pre>


<p>This creates the following effect:</p>

<p><img src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/olMUglF.gif" width="400" alt="Screenshot"></p>

<h4><a class="anchor" id="attaching-click-handlers-using-listeners" href="https://guides.codepath.com/android/using-the-recyclerview#attaching-click-handlers-using-listeners"><i class="fa fa-link"></i></a>Attaching Click Handlers using Listeners</h4>

<p>In certain cases, you'd want to setup click handlers for views within the <code>RecyclerView</code> but define the click logic within the containing <code>Activity</code> or <code>Fragment</code> (i.e bubble up events from the adapter). To achieve this, <a class="internal present" href="https://guides.codepath.com/android/Creating-Custom-Listeners">create a custom listener</a> within the adapter and then fire the events upwards to an interface implementation defined within the parent:</p>

<pre class="highlight" data-lang="Java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ContactsAdapter</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="cm">/***** Creating OnItemClickListener *****/</span>

    <span class="c1">// Define listener member variable</span>
    <span class="kd">private</span> <span class="n">OnItemClickListener</span> <span class="n">listener</span><span class="o">;</span>
    <span class="c1">// Define the listener interface</span>
    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OnItemClickListener</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">onItemClick</span><span class="o">(</span><span class="n">View</span> <span class="n">itemView</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Define the method that allows the parent activity or fragment to define the listener</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOnItemClickListener</span><span class="o">(</span><span class="n">OnItemClickListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">listener</span> <span class="o">=</span> <span class="n">listener</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="n">TextView</span> <span class="n">tvName</span><span class="o">;</span>
        <span class="kd">public</span> <span class="n">TextView</span> <span class="n">tvHometown</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">ViewHolder</span><span class="o">(</span><span class="kd">final</span> <span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">tvName</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvName</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">tvHometown</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tvHometown</span><span class="o">);</span>
            <span class="c1">// Setup the click listener</span>
            <span class="n">itemView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// Triggers click upwards to the adapter on click</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">listener</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="kt">int</span> <span class="n">position</span> <span class="o">=</span> <span class="n">getAdapterPosition</span><span class="o">();</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">position</span> <span class="o">!=</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">NO_POSITION</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">listener</span><span class="o">.</span><span class="na">onItemClick</span><span class="o">(</span><span class="n">itemView</span><span class="o">,</span> <span class="n">position</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>


<p>Then we can attach a click handler to the adapter with:</p>

<pre class="highlight" data-lang="Java"><code><span class="c1">// In the activity or fragment</span>
<span class="n">ContactsAdapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">adapter</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">ContactsAdapter</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onItemClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">).</span><span class="na">name</span><span class="o">;</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">UserListActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s">" was clicked!"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span></code></pre>


<p>See <a href="http://stackoverflow.com/a/24933117/313399">this detailed stackoverflow post</a> which describes how to setup item-level click handlers when using <code>RecyclerView</code>.</p>

<h2><a class="anchor" id="implementing-pull-to-refresh" href="https://guides.codepath.com/android/using-the-recyclerview#implementing-pull-to-refresh"><i class="fa fa-link"></i></a>Implementing Pull to Refresh</h2>

<p>The <code>SwipeRefreshLayout</code> should be used to refresh the contents of a <code>RecyclerView</code> via a vertical swipe gesture. See our detailed <a class="internal present" href="https://guides.codepath.com/android/Implementing-Pull-to-Refresh-Guide#recyclerview-with-swiperefreshlayout">RecyclerView with SwipeRefreshLayout</a> guide for a step-by-step tutorial on implementing pull to refresh.</p>

<h2><a class="anchor" id="swipe-detection" href="https://guides.codepath.com/android/using-the-recyclerview#swipe-detection"><i class="fa fa-link"></i></a>Swipe Detection</h2>

<p>RecyclerView (since the release of v24.2.0) now has an <code>OnFlingListener</code> method that can be used to implement custom fling behavior.  Download this <a href="https://gist.github.com/rogerhu/9e769149f9550c0a6ddb4987b94caee8">RecyclerViewSwipeListener</a> and you can handle custom swipe detection by adding this class to your RecyclerView:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">RecyclerView</span> <span class="n">rvMyList</span><span class="o">;</span>

<span class="n">rvMyList</span><span class="o">.</span><span class="na">setOnFlingListener</span><span class="o">(</span><span class="k">new</span> <span class="n">RecyclerViewSwipeListener</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSwipeDown</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">"swipe down"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSwipeUp</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">"swipe up"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
   <span class="o">}</span>
<span class="o">});</span></code></pre>


<h2><a class="anchor" id="using-uncover-library" href="https://guides.codepath.com/android/using-the-recyclerview#using-uncover-library"><i class="fa fa-link"></i></a>Using Uncover library</h2>

<p>If your use RecyclerView to implement 'infinite scrolling' over output of the web service, or some other resource that requires slow background calls with multiple items at once, it may be reasonable to try the <a href="https://github.com/andviane/google-books-android-viewer">Uncover library</a> from Maven central:</p>

<pre class="highlight" data-lang="Java"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="o">(</span><span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">andviane</span><span class="o">:</span><span class="nl">uncover:</span><span class="mf">2.0</span><span class="o">.</span><span class="mi">1</span><span class="nd">@aar</span><span class="err">'</span><span class="o">)</span>
<span class="o">}</span>    </code></pre>

This library requires you to implement the primary data fetcher, mediating between fast single item UI-thread calls on model and slow chunked calls on the background on your fetcher:

<pre class="highlight" data-lang="Java"><code>  <span class="kd">final</span> <span class="n">RecyclerView</span> <span class="n">recyclerView</span> <span class="o">=</span> <span class="o">(</span><span class="n">RecyclerView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">recycler</span><span class="o">);</span>
  <span class="kd">final</span> <span class="n">UncoveringDataModel</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UncoveringDataModel</span><span class="o">&lt;&gt;();</span>

  <span class="n">model</span><span class="o">.</span><span class="na">setPrimaryDataProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">PrimaryDataProvider</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">PrimaryResponse</span> <span class="nf">fetch</span><span class="o">(</span><span class="n">PrimaryRequest</span> <span class="n">primaryRequest</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">"Fetch"</span><span class="o">,</span> <span class="s">"Service call to fetch items"</span> <span class="o">+</span> 
        <span class="n">primaryRequest</span><span class="o">.</span><span class="na">getFrom</span><span class="o">()</span> <span class="o">+</span> <span class="s">"- "</span> <span class="o">+</span> <span class="n">primaryRequest</span><span class="o">.</span><span class="na">getTo</span><span class="o">());</span>
      <span class="o">...</span>
      <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
      <span class="o">...</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">PrimaryResponse</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="n">data</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">});</span>

  <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">...</span>
  <span class="o">};</span>
  <span class="n">model</span><span class="o">.</span><span class="na">install</span><span class="o">(</span><span class="n">recyclerView</span><span class="o">,</span> <span class="n">adapter</span><span class="o">);</span></code></pre>


<p>The <code>model.install</code> glues model, view and adapter into working implementation. When the user swipes forward quickly, the library skips unneeded fetches of data between the new and old position, last requested data are fetched first, and any pending requests are dropped from the queue if they data are no longer visible. </p>

<h2><a class="anchor" id="references" href="https://guides.codepath.com/android/using-the-recyclerview#references"><i class="fa fa-link"></i></a>References</h2>

<ul>
<li><a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html">https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html</a></li>
<li><a href="http://www.grokkingandroid.com/first-glance-androids-recyclerview/">http://www.grokkingandroid.com/first-glance-androids-recyclerview/</a></li>
<li><a href="http://www.grokkingandroid.com/statelistdrawables-for-recyclerview-selection/">http://www.grokkingandroid.com/statelistdrawables-for-recyclerview-selection/</a></li>
<li><a href="http://www.bignerdranch.com/blog/recyclerview-part-1-fundamentals-for-listview-experts/">http://www.bignerdranch.com/blog/recyclerview-part-1-fundamentals-for-listview-experts/</a></li>
<li><a href="https://developer.android.com/training/material/lists-cards.html">https://developer.android.com/training/material/lists-cards.html</a></li>
<li><a href="http://antonioleiva.com/recyclerview/">http://antonioleiva.com/recyclerview/</a></li>
<li><a href="https://code.tutsplus.com/tutorials/getting-started-with-recyclerview-and-cardview-on-android--cms-23465">https://code.tutsplus.com/tutorials/getting-started-with-recyclerview-and-cardview-on-android--cms-23465</a></li>
<li><a href="https://code.tutsplus.com/tutorials/introduction-to-the-new-lollipop-activity-transitions--cms-23711">https://code.tutsplus.com/tutorials/introduction-to-the-new-lollipop-activity-transitions--cms-23711</a></li>
</ul>
</div></div></div></div><a href="https://github.com/codepath/android_guides/wiki/" class="visible-md visible-lg"><img style="position: fixed; bottom: 0; right: 0; border: 0;" src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/fork_me.png" alt="Fork me on GitHub"></a><script src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/jquery.js" type="text/javascript"></script><script src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/jquery.absolutize.js" type="text/javascript"></script><script src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/bootstrap.min.js" type="text/javascript"></script><script src="./Using the RecyclerView _ CodePath Android Cliffnotes_files/application.js" type="text/javascript"></script></body></html>