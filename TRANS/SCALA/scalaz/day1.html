<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_day_1">day 1</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_typeclasses_101">typeclasses 101</h3>
<div class="paragraph"><p><em>Learn You a Haskell for Great Good</em> каже:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Типоклас є різновидом інтерфейсу, що описує деяку поведінку. Якщо тип є частиною типокласу, це означає, що він підтримує та реалізує поведінку, яку описує типоклас.</code></pre>
</div></div>
<div class="paragraph"><p><em>Scalaz</em> каже:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Він провадить чисто функціональні структури даних до компонентів зі стандартної бібліотеки Scala. Він визначає набір функціональних классів типів (`Functor`, `Monad`) , та відповідні примірники для великої кількості структур даних.</code></pre>
</div></div>
<div class="paragraph"><p>Давайте подивимось, чи я зможу вивчити Scalaz, навчаючи мене Haskell.</p></div>
</div>
<div class="sect2">
<h3 id="_sbt">sbt</h3>
<div class="paragraph"><p>Ось <code>build.sbt</code> для тестування Scalaz 7.1.0:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">&quot;2.11.2&quot;</span>

<span class="k">val</span> <span class="n">scalazVersion</span> <span class="k">=</span> <span class="s">&quot;7.1.0&quot;</span>

<span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="s">&quot;org.scalaz&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalaz-core&quot;</span> <span class="o">%</span> <span class="n">scalazVersion</span><span class="o">,</span>
  <span class="s">&quot;org.scalaz&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalaz-effect&quot;</span> <span class="o">%</span> <span class="n">scalazVersion</span><span class="o">,</span>
  <span class="s">&quot;org.scalaz&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalaz-typelevel&quot;</span> <span class="o">%</span> <span class="n">scalazVersion</span><span class="o">,</span>
  <span class="s">&quot;org.scalaz&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalaz-scalacheck-binding&quot;</span> <span class="o">%</span> <span class="n">scalazVersion</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
<span class="o">)</span>

<span class="n">scalacOptions</span> <span class="o">+=</span> <span class="s">&quot;-feature&quot;</span>

<span class="n">initialCommands</span> <span class="n">in</span> <span class="n">console</span> <span class="o">:=</span> <span class="s">&quot;import scalaz._, Scalaz._&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>Все що вам тепер треба зробити, це відкрити REPL використовуючи sbt 0.13.0:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span>$ sbt console
...
<span class="o">[</span>info<span class="o">]</span> downloading http://repo1.maven.org/maven2/org/scalaz/scalaz-core_2.10/7.0.5/scalaz-core_2.10-7.0.5.jar ...
import scalaz._
import Scalaz._
Welcome to Scala version <span class="m">2</span>.10.3 <span class="o">(</span>Java HotSpot<span class="o">(</span>TM<span class="o">)</span> <span class="m">64</span>-Bit Server VM, Java <span class="m">1</span>.6.0_51<span class="o">)</span>.
Type in expressions to have them evaluated.
Type :help <span class="k">for</span> more information.

scala&gt;
</pre></div></div></div>
<div class="paragraph"><p>Також існує API документація, згенерована для Scalaz 7.1.0.</p></div>
</div>
<div class="sect2">
<h3 id="_equal">Equal</h3>
<div class="paragraph"><p>LYAHFGG: <code>Eq</code> використовується для типів, що підтримують перевірку на еквівалентність. Він реалізує члени-функції <code>==</code> та <code>/=</code>.</p></div>
<div class="paragraph"><p>Еквівалент Scalaz типокласа <code>Eq</code> має назву <code>Equal</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">===</span> <span class="mi">1</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">===</span> <span class="s">&quot;foo&quot;</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">14</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">could</span> <span class="kt">not</span> <span class="kt">find</span> <span class="kt">implicit</span> <span class="kt">value</span> <span class="kt">for</span> <span class="kt">parameter</span> <span class="kt">F0:</span> <span class="kt">scalaz.Equal</span><span class="o">[</span><span class="kt">Object</span><span class="o">]</span>
              <span class="mi">1</span> <span class="o">===</span> <span class="s">&quot;foo&quot;</span>
              <span class="o">^</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="s">&quot;foo&quot;</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">14</span><span class="k">:</span> <span class="kt">warning:</span> <span class="kt">comparing</span> <span class="kt">values</span> <span class="kt">of</span> <span class="k">type</span><span class="kt">s</span> <span class="kt">Int</span> <span class="kt">and</span> <span class="kt">String</span> <span class="kt">using</span> <span class="err">`</span><span class="o">==</span><span class="err">&#39;</span> <span class="n">will</span> <span class="n">always</span> <span class="k">yield</span> <span class="kc">false</span>
              <span class="mi">1</span> <span class="o">==</span> <span class="s">&quot;foo&quot;</span>
                <span class="o">^</span>
<span class="n">res2</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mf">1.</span><span class="n">some</span> <span class="o">=/=</span> <span class="mf">2.</span><span class="n">some</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">assert_===</span> <span class="mi">2</span>
<span class="n">java</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="nc">RuntimeException</span><span class="k">:</span> <span class="err">1</span> <span class="kt">≠</span> <span class="err">2</span>
</pre></div></div></div>
<div class="paragraph"><p>Замість стандартного <code>==</code>, <code>Equal</code> дозволяє синтаксис <code>===</code>, <code>=/=</code>, та <code>assert_===</code> через декларування метода <code>equal</code>. Головна різниця в тому, що <code>===</code> не пройде компіляцію, якщо ви спробуєте порівняти <code>Int</code> та <code>String</code>.</p></div>
<div class="paragraph"><p>Note: В мене в оригіналі було <code>/==</code> замість <code>=/=</code>, але Eiríkr Åsheim вказав мені на це:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>⛭ esoterik ⛭
@d6
 @eed3si9n хей, читав твої туторіали зі scalaz. тобі треба заохочувати людей використовувати `=/=` та не `/==`, оскільки останнє має поганий преоритет.

7
6:54 AM - Sep 6, 2012
Twitter Ads info and privacy
See ⛭ esoterik ⛭'s other Tweets</code></pre>
</div></div>
<div class="paragraph"><p>Звичайно оператори порівняння, як <code>!=</code>, мають вищий рівень преоритету, ніж <code>&amp;&amp;</code>, всі літери, тощо. Через особливе правило преоритетів правило <code>/==</code> розпізнається як оператор присвоювання, оскільки він завершується на <code>=</code>, але не починається з <code>=</code>, що відкидає його донизу таблиці преоритетів:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">/==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">14</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">value</span> <span class="kt">&amp;&amp;</span> <span class="kt">is</span> <span class="kt">not</span> <span class="kt">a</span> <span class="kt">member</span> <span class="kt">of</span> <span class="kt">Int</span>
              <span class="mi">1</span> <span class="o">/==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span>
                      <span class="o">^</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">=/=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span>
<span class="n">res6</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_order">Order</h3>
<div class="paragraph"><p>LYAHFGG: <code>Ord</code> призначений для типів, що мають впорядкування. <code>Ord</code> покриває всі стандартні функції порівняння, такі як <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code> та <code>&lt;=</code>.</p></div>
<div class="paragraph"><p>Еквівалент Scalaz до типокласу <code>Ord</code> є <code>Order</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mf">2.0</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">gt</span> <span class="mf">2.0</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">14</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">could</span> <span class="kt">not</span> <span class="kt">find</span> <span class="kt">implicit</span> <span class="kt">value</span> <span class="kt">for</span> <span class="kt">parameter</span> <span class="kt">F0:</span> <span class="kt">scalaz.Order</span><span class="o">[</span><span class="kt">Any</span><span class="o">]</span>
              <span class="mi">1</span> <span class="n">gt</span> <span class="mf">2.0</span>
              <span class="o">^</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mf">1.0</span> <span class="o">?|?</span> <span class="mf">2.0</span>
<span class="n">res10</span><span class="k">:</span> <span class="kt">scalaz.Ordering</span> <span class="o">=</span> <span class="nc">LT</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mf">1.0</span> <span class="n">max</span> <span class="mf">2.0</span>
<span class="n">res11</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mf">2.0</span>
</pre></div></div></div>
<div class="paragraph"><p><code>Order</code> дозволяє синтаксис <code>?|?</code>, що повератє <code>Ordering</code>: <code>LT</code>, <code>GT</code>, та <code>EQ</code>. Він також дозволяє оператори <code>lt</code>, <code>gt</code>, <code>lte</code>, <code>gte</code>, <code>min</code>, та <code>max</code>, декларуючи метод <code>order</code>. Подібно до <code>Equal</code>, порівняння <code>Int</code> та <code>Double</code> завалить порівняння.</p></div>
</div>
<div class="sect2">
<h3 id="_show">Show</h3>
<div class="paragraph"><p>LYAHFGG: Члени <code>Show</code> можуть бути представлені як рядки.</p></div>
<div class="paragraph"><p>Еквівалент Scalaz для типокласу <code>Show</code> є <code>Show</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="mf">3.</span><span class="n">show</span>
<span class="n">res14</span><span class="k">:</span> <span class="kt">scalaz.Cord</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mf">3.</span><span class="n">shows</span>
<span class="n">res15</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;hello&quot;</span><span class="o">.</span><span class="n">println</span>
<span class="s">&quot;hello&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p><code>Cord</code> є чисто функціональна структура даних для потенційно довгих  <code>Strings</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_read">Read</h3>
<div class="paragraph"><p>LYAHFGG: <code>Read</code> є в деякому сенсі протилежний типоклас для <code>Show</code>. Функція <code>read</code> приймає рядок, та повертає тип, який є членом <code>Read</code>.</p></div>
<div class="paragraph"><p>Я не знайшов еквівалент Scalaz для цього типокласу.</p></div>
</div>
<div class="sect2">
<h3 id="_enum">Enum</h3>
<div class="paragraph"><p>LYAHFGG: Члени <code>Enum</code> є послідовно впорядковані типи — вони можуть бути перелічені. Головна перевага типокласу <code>Enum</code> в тому, що ми можемо використовувати його типи в диапазонах списків. Вони також мають попередній та наступний елемент, які ви можете отримати за допомогою функцій <code>succ</code> та <code>pred</code>.</p></div>
<div class="paragraph"><p>Еквівалент Scalaz для типокласу <code>Enum</code> є <code>Enum</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="sc">&#39;a&#39;</span> <span class="n">to</span> <span class="sc">&#39;e&#39;</span>
<span class="n">res30</span><span class="k">:</span> <span class="kt">scala.collection.immutable.NumericRange.Inclusive</span><span class="o">[</span><span class="kt">Char</span><span class="o">]</span> <span class="k">=</span> <span class="nc">NumericRange</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="sc">&#39;a&#39;</span> <span class="o">|-&gt;</span> <span class="sc">&#39;e&#39;</span>
<span class="n">res31</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Char</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">|=&gt;</span> <span class="mi">5</span>
<span class="n">res32</span><span class="k">:</span> <span class="kt">scalaz.EphemeralStream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">scalaz</span><span class="o">.</span><span class="nc">EphemeralStreamFunctions$$anon$4</span><span class="k">@</span><span class="mi">6</span><span class="n">a61c7b6</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="sc">&#39;B&#39;</span><span class="o">.</span><span class="n">succ</span>
<span class="n">res33</span><span class="k">:</span> <span class="kt">Char</span> <span class="o">=</span> <span class="n">C</span>
</pre></div></div></div>
<div class="paragraph"><p>Замість стандартного <code>to</code>, <code>Enum</code> дозволяє <code>|-&gt;</code>, що повертає <code>List</code> через декларацію методів <code>pred</code> та <code>succ</code> поверх типокласу <code>Order</code>. Також є кіпа інших операторів, що він визначає, як <code>-+-</code>, <code>---</code>, <code>from</code>, <code>fromStep</code>, <code>pred</code>, <code>predx</code>, <code>succ</code>, <code>succx</code>, <code>|--&gt;</code>, <code>|-&gt;</code>, <code>|==&gt;</code>, та <code>|=&gt;</code>. Виглядає що всі вони присвячені ходінню взад-вперед, та повертають диапазони.</p></div>
</div>
<div class="sect2">
<h3 id="_bounded">Bounded</h3>
<div class="paragraph"><p>LYAHFGG: Члени <code>Bounded</code> мають верхню та нижню межу.</p></div>
<div class="paragraph"><p>Еквівалент Scalaz для <code>Bounded</code>, здається, знову буде <code>Enum</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[</span><span class="kt">Char</span><span class="o">]].</span><span class="n">min</span>
<span class="n">res43</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Char</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(?)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[</span><span class="kt">Char</span><span class="o">]].</span><span class="n">max</span>
<span class="n">res44</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Char</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span> <span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[</span><span class="kt">Double</span><span class="o">]].</span><span class="n">max</span>
<span class="n">res45</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="mf">1.7976931348623157E308</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[</span><span class="kt">Int</span><span class="o">]].</span><span class="n">min</span>
<span class="n">res46</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(-</span><span class="mi">2147483648</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[(</span><span class="kt">Boolean</span>, <span class="kt">Int</span>, <span class="kt">Char</span><span class="o">)]].</span><span class="n">max</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">14</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">could</span> <span class="kt">not</span> <span class="kt">find</span> <span class="kt">implicit</span> <span class="kt">value</span> <span class="kt">for</span> <span class="kt">parameter</span> <span class="kt">e:</span> <span class="kt">scalaz.Enum</span><span class="o">[(</span><span class="kt">Boolean</span>, <span class="kt">Int</span>, <span class="kt">Char</span><span class="o">)]</span>
              <span class="n">implicitly</span><span class="o">[</span><span class="kt">Enum</span><span class="o">[(</span><span class="kt">Boolean</span>, <span class="kt">Int</span>, <span class="kt">Char</span><span class="o">)]].</span><span class="n">max</span>
                        <span class="o">^</span>
</pre></div></div></div>
<div class="paragraph"><p>Примірник типокласу <code>Enum</code> повертає <code>Option[T]</code> для <code>max</code> значень.</p></div>
</div>
<div class="sect2">
<h3 id="_num">Num</h3>
<div class="paragraph"><p>LYAHFGG: <code>Num</code> є числовий типоклас. Його члени мають властивість бути в змозі поводитись як числа.</p></div>
<div class="paragraph"><p>Я не знайшов еквівалентів Scalaz для <code>Num</code>, <code>Floating</code>, та <code>Integral</code>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="__102">Типокласи 102</h2>
<div class="sectionbody">
<div class="paragraph"><p>Тепер я збираюсь перестрибнути до Глави 8, Створення ваших власних типокласів (Глава 7, якщо в вас є книжка), оскільки глави посередині здебільшого присвячені синтаксису Haskell.</p></div>
<div class="sect3">
<h4 id="_____">Тип даних для світла світлофора</h4>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kr">data</span> <span class="kt">TrafficLight</span> <span class="ow">=</span> <span class="kt">Red</span> <span class="o">|</span> <span class="kt">Yellow</span> <span class="o">|</span> <span class="kt">Green</span>
</pre></div></div></div>
<div class="paragraph"><p>В Scala це буде:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">:</span><span class="kt">paste</span>
<span class="c1">// Entering paste mode (ctrl-D to finish)</span>

<span class="k">sealed</span> <span class="k">trait</span> <span class="nc">TrafficLight</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Red</span> <span class="k">extends</span> <span class="nc">TrafficLight</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Yellow</span> <span class="k">extends</span> <span class="nc">TrafficLight</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Green</span> <span class="k">extends</span> <span class="nc">TrafficLight</span>
</pre></div></div></div>
<div class="paragraph"><p>Тепер давайте визначимо примірник для <code>Equal</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="nc">TrafficLightEqual</span><span class="k">:</span> <span class="kt">Equal</span><span class="o">[</span><span class="kt">TrafficLight</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Equal</span><span class="o">.</span><span class="n">equal</span><span class="o">(</span><span class="k">_</span> <span class="o">==</span> <span class="k">_</span><span class="o">)</span>
<span class="nc">TrafficLightEqual</span><span class="k">:</span> <span class="kt">scalaz.Equal</span><span class="o">[</span><span class="kt">TrafficLight</span><span class="o">]</span> <span class="k">=</span> <span class="n">scalaz</span><span class="o">.</span><span class="nc">Equal$$anon$7</span><span class="k">@</span><span class="mi">2457733</span><span class="n">b</span>
</pre></div></div></div>
<div class="paragraph"><p>Чи можу я використати його?</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Red</span> <span class="o">===</span> <span class="nc">Yellow</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">18</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">could</span> <span class="kt">not</span> <span class="kt">find</span> <span class="kt">implicit</span> <span class="kt">value</span> <span class="kt">for</span> <span class="kt">parameter</span> <span class="kt">F0:</span> <span class="kt">scalaz.Equal</span><span class="o">[</span><span class="kt">Product</span> <span class="kt">with</span> <span class="kt">Serializable</span> <span class="kt">with</span> <span class="kt">TrafficLight</span><span class="o">]</span>
              <span class="nc">Red</span> <span class="o">===</span> <span class="nc">Yellow</span>
</pre></div></div></div>
<div class="paragraph"><p>Вочевідь <code>Equal[TrafficLight]</code> не був обраний, оскільки <code>Equal</code> має неваріантну субтипізацію: <code>Equal[F]</code>. Якщо я перевторю <code>TrafficLight</code> на кейс клас, тоді <code>Red</code> та <code>Yellow</code> будуть мати той самий тип, але тоді я втрачу тісне співпадіння шаблонів від закоркованого #fail.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">:</span><span class="kt">paste</span>
<span class="c1">// Entering paste mode (ctrl-D to finish)</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">val</span> <span class="n">red</span> <span class="k">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="s">&quot;red&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">yellow</span> <span class="k">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="s">&quot;yellow&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">green</span> <span class="k">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="s">&quot;green&quot;</span><span class="o">)</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="nc">TrafficLightEqual</span><span class="k">:</span> <span class="kt">Equal</span><span class="o">[</span><span class="kt">TrafficLight</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Equal</span><span class="o">.</span><span class="n">equal</span><span class="o">(</span><span class="k">_</span> <span class="o">==</span> <span class="k">_</span><span class="o">)</span>
<span class="n">red</span> <span class="o">===</span> <span class="n">yellow</span>

<span class="c1">// Exiting paste mode, now interpreting.</span>

<span class="n">defined</span> <span class="k">class</span> <span class="nc">TrafficLight</span>
<span class="n">red</span><span class="k">:</span> <span class="kt">TrafficLight</span> <span class="o">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="n">red</span><span class="o">)</span>
<span class="n">yellow</span><span class="k">:</span> <span class="kt">TrafficLight</span> <span class="o">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="n">yellow</span><span class="o">)</span>
<span class="n">green</span><span class="k">:</span> <span class="kt">TrafficLight</span> <span class="o">=</span> <span class="nc">TrafficLight</span><span class="o">(</span><span class="n">green</span><span class="o">)</span>
<span class="nc">TrafficLightEqual</span><span class="k">:</span> <span class="kt">scalaz.Equal</span><span class="o">[</span><span class="kt">TrafficLight</span><span class="o">]</span> <span class="k">=</span> <span class="n">scalaz</span><span class="o">.</span><span class="nc">Equal</span><span class="o">\</span><span class="n">$</span><span class="o">\</span><span class="nc">$anon$7</span><span class="k">@</span><span class="mi">42988</span><span class="n">fee</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="__yes_no">Типоклас Yes-No</h3>
<div class="paragraph"><p>Давайте подивимось, чи ми можемо створити наш власний справжній типоклас в стилі Scalaz. За тим винятком, що я додам свій нахил до нього щодо домовленості іменування. Scalaz називає три або чотири різні речі з використанням імені типокласу, як <code>Show</code>, <code>show</code>, та  <code>show</code>, що трохи бентежить.</p></div>
<div class="paragraph"><p>Мені подобається ставити префікс <code>Can</code> до імені типокласу, позичивши його з <code>CanBuildFrom</code>, і іменувати його методи як слово + <code>s</code>, позичаючи від <code>sjson</code>/<code>sbinary</code>. Оскільки <code>yesno</code> не має багато сенсу, давайте назвемо його <code>truthy</code>. Проміжна ціль отримати <code>1.truthy</code> що повертає <code>true</code>. Мінусом є те, що додаткове <code>s</code> додається, якщо ми бажаємо використати примірники типокласу як функції, як <code>CanTruthy[Int].truthys(1)</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">:</span><span class="kt">paste</span>
<span class="c1">// Entering paste mode (ctrl-D to finish)</span>

<span class="k">trait</span> <span class="nc">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
  <span class="cm">/** @return true, if `a` is truthy. */</span>
  <span class="k">def</span> <span class="n">truthys</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span>
<span class="o">}</span>
<span class="k">object</span> <span class="nc">CanTruthy</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">apply</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">ev</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">ev</span>
  <span class="k">def</span> <span class="n">truthys</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">truthys</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="k">trait</span> <span class="nc">CanTruthyOps</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">self</span><span class="k">:</span> <span class="kt">A</span>
  <span class="k">implicit</span> <span class="k">def</span> <span class="n">F</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="k">final</span> <span class="k">def</span> <span class="n">truthy</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">truthys</span><span class="o">(</span><span class="n">self</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">object</span> <span class="nc">ToCanIsTruthyOps</span> <span class="o">{</span>
  <span class="k">implicit</span> <span class="k">def</span> <span class="n">toCanIsTruthyOps</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">v</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">ev</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span>
    <span class="k">new</span> <span class="nc">CanTruthyOps</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">self</span> <span class="k">=</span> <span class="n">v</span>
      <span class="k">implicit</span> <span class="k">def</span> <span class="n">F</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="n">ev</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Exiting paste mode, now interpreting.</span>

<span class="n">defined</span> <span class="k">trait</span> <span class="nc">CanTruthy</span>
<span class="n">defined</span> <span class="n">module</span> <span class="nc">CanTruthy</span>
<span class="n">defined</span> <span class="k">trait</span> <span class="nc">CanTruthyOps</span>
<span class="n">defined</span> <span class="n">module</span> <span class="nc">ToCanIsTruthyOps</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">ToCanIsTruthyOps._</span>
<span class="k">import</span> <span class="nn">ToCanIsTruthyOps._</span>
</pre></div></div></div>
<div class="paragraph"><p>Ось як ми можемо визначити примірники типокласу для <code>Int</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="n">intCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy</span><span class="o">.</span><span class="n">truthys</span><span class="o">({</span>
         <span class="k">case</span> <span class="mi">0</span> <span class="k">=&gt;</span> <span class="kc">false</span>
         <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="kc">true</span>
       <span class="o">})</span>
<span class="n">intCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy$$anon$1</span><span class="k">@</span><span class="mi">71780051</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="mf">10.</span><span class="n">truthy</span>
<span class="n">res6</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>
<span class="nc">Next</span> <span class="n">is</span> <span class="k">for</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span>

<span class="kt">scala&gt;</span> <span class="kt">implicit</span> <span class="kt">def</span> <span class="kt">listCanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">CanTruthy</span><span class="o">.</span><span class="n">truthys</span><span class="o">({</span>
         <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="kc">false</span>
         <span class="k">case</span> <span class="k">_</span>   <span class="k">=&gt;</span> <span class="kc">true</span>
       <span class="o">})</span>
<span class="n">listCanTruthy</span><span class="k">:</span> <span class="err">[</span><span class="kt">A</span><span class="err">]</span><span class="o">=&gt;</span> <span class="nc">CanTruthy</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">).</span><span class="n">truthy</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Nil</span><span class="o">.</span><span class="n">truthy</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">23</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">could</span> <span class="kt">not</span> <span class="kt">find</span> <span class="kt">implicit</span> <span class="kt">value</span> <span class="kt">for</span> <span class="kt">parameter</span> <span class="kt">ev:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">scala.collection.immutable.Nil.</span><span class="k">type</span><span class="o">]</span>
              <span class="nc">Nil</span><span class="o">.</span><span class="n">truthy</span>
</pre></div></div></div>
<div class="paragraph"><p>Здається, нам треба розглядати <code>Nil</code> особливо, через неваріантність.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="n">nilCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">scala.collection.immutable.Nil.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy</span><span class="o">.</span><span class="n">truthys</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="kc">false</span><span class="o">)</span>
<span class="n">nilCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">collection.immutable.Nil.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy$$anon$1</span><span class="k">@</span><span class="mi">1</span><span class="n">e5f0fd7</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Nil</span><span class="o">.</span><span class="n">truthy</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
</pre></div></div></div>
<div class="paragraph"><p>Та для <code>Boolean</code> використовувати <code>identity</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">implicit</span> <span class="k">val</span> <span class="n">booleanCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy</span><span class="o">.</span><span class="n">truthys</span><span class="o">(</span><span class="n">identity</span><span class="o">)</span>
<span class="n">booleanCanTruthy</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">]</span> <span class="k">=</span> <span class="nc">CanTruthy$$anon$1</span><span class="k">@</span><span class="mi">334</span><span class="n">b4cb</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="kc">false</span><span class="o">.</span><span class="n">truthy</span>
<span class="n">res11</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
</pre></div></div></div>
<div class="paragraph"><p>Використовуючи типоклас <code>CanTruthy</code> давайте визначимо <code>truthyIf</code> як LYAHFGG:</p></div>
<div class="paragraph"><p>Тепер давайте зробимо функцію, що копіює твердження <code>if</code>, але що робитиме зі значеннями <code>YesNo</code>.</p></div>
<div class="paragraph"><p>Щоб відкласти обчислення переданих аргументів ми можемо використати передачу-по-імені:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">:</span><span class="kt">paste</span>
<span class="c1">// Entering paste mode (ctrl-D to finish)</span>

<span class="k">def</span> <span class="n">truthyIf</span><span class="o">[</span><span class="kt">A:</span> <span class="kt">CanTruthy</span>, <span class="kt">B</span>, <span class="kt">C</span><span class="o">](</span><span class="n">cond</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="n">ifyes</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)(</span><span class="n">ifno</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">C</span><span class="o">)</span> <span class="k">=</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">cond</span><span class="o">.</span><span class="n">truthy</span><span class="o">)</span> <span class="n">ifyes</span>
  <span class="k">else</span> <span class="n">ifno</span>

<span class="c1">// Exiting paste mode, now interpreting.</span>

<span class="n">truthyIf</span><span class="k">:</span> <span class="err">[</span><span class="kt">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">C</span><span class="err">]</span><span class="o">(</span><span class="n">cond</span><span class="k">:</span> <span class="kt">A</span><span class="o">)(</span><span class="n">ifyes</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)(</span><span class="n">ifno</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">C</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">evidence$1</span><span class="k">:</span> <span class="kt">CanTruthy</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="nc">Any</span>
<span class="nc">Here</span><span class="err">’</span><span class="n">s</span> <span class="n">how</span> <span class="n">we</span> <span class="n">can</span> <span class="n">use</span> <span class="n">it</span><span class="k">:</span>

<span class="kt">scala&gt;</span> <span class="kt">truthyIf</span> <span class="o">(</span><span class="kt">Nil</span><span class="o">)</span> <span class="o">{</span><span class="err">&quot;</span><span class="kt">YEAH!</span><span class="err">&quot;</span><span class="o">}</span> <span class="o">{</span><span class="err">&quot;</span><span class="kt">NO!</span><span class="err">&quot;</span><span class="o">}</span>
<span class="kt">res12:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="nc">NO</span><span class="o">!</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">truthyIf</span> <span class="o">(</span><span class="mi">2</span> <span class="o">::</span> <span class="mi">3</span> <span class="o">::</span> <span class="mi">4</span> <span class="o">::</span> <span class="nc">Nil</span><span class="o">)</span> <span class="o">{</span><span class="s">&quot;YEAH!&quot;</span><span class="o">}</span> <span class="o">{</span><span class="s">&quot;NO!&quot;</span><span class="o">}</span>
<span class="n">res13</span><span class="k">:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="nc">YEAH</span><span class="o">!</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">truthyIf</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span><span class="s">&quot;YEAH!&quot;</span><span class="o">}</span> <span class="o">{</span><span class="s">&quot;NO!&quot;</span><span class="o">}</span>
<span class="n">res14</span><span class="k">:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="nc">YEAH</span><span class="o">!</span>
</pre></div></div></div>
<div class="paragraph"><p>Пізніше ми візьмемо його звідси.</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2019-07-26 16:17:55 EEST
</div>
</div>
</body>
</html>
