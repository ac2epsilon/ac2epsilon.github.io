<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="__34">Глава 34</h2>
<div class="sectionbody">
</div>
</div>
<h1 id="___">Програмування користувацького інтерфейсу</h1>
<div class="paragraph"><p>В цій главі ми навчимось, як розробляти Scala застосування, що використовують графічний користувацький інтерфейс (GUI). Застосування, що ми будемо розробляти, базуються на Scala бібліотеці, що провадить доступ до класів фреймворку Java Swing GUI. Концептуально бібліотека Scala повторює підлеглі класи Swing, але приховує більшість з їх складності. Ви знайдете, що використовуючи цей фреймворк розробка GUI застосувань насправді досить проста.</p></div>
<div class="paragraph"><p>Навіть зі спрощеннями Scala, фреймворк як Swing є досить багатим, з багатьма різними класами, та багатьма методами в кожному класі. Щоб знайти свій шлях в такій багатій бібліотеці, допомагає використовувати IDE, таку як Eclipse зі Scala плагіном. Перевага в тому, що IDE може вам інтерактивно показувати через завершення команд, які класи доступні в пакунку, та які методи доступні для о'бєктів, на які ви посилаєтесь. Це помітно прискорює ваше навчання коли ви вперше досліджуєте невідомий космос бібліотеки.</p></div>
<div class="paragraph"><p>Малюнок 34.1 - Просте застосування Swing: початкове (зліва) та збільшене (зправа).</p></div>
<div class="sect1">
<h2 id="_34_1__swing_">34.1 Перше Swing застосування</h2>
<div class="sectionbody">
<div class="paragraph"><p>Як перше Swing застосування ми почнемо з вікна, що містить одну кнопку. Щоб програмувати зі Swing вам треба імпортувати різні класи з пакунка Scala Swing API:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.swing._</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 34.1 показує код вашого першого Swing застосування в Scala. Якщо ви скомпілюєте та виконаєте цей файл, ви маєте побачити вікно, як показано зліва на Малюнку 34.1. Вікно може змінити розмір до більшого розділу, як показано зправа на Малюнку 34.1.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.swing._</span>

<span class="k">object</span> <span class="nc">FirstSwingApp</span> <span class="k">extends</span> <span class="nc">SimpleSwingApplication</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">top</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MainFrame</span> <span class="o">{</span>
    <span class="n">title</span> <span class="k">=</span> <span class="s">&quot;First Swing App&quot;</span>
    <span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Button</span> <span class="o">{</span>
      <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Click me&quot;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лісинг 34.1 - Просте Scala Swing застосування.</p></div>
<div class="paragraph"><p>Якщо ви проаналізуєте код в Лістингу 34.1 рядок за рядком, ви помітите наступні елементи:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">FirstSwingApp</span> <span class="k">extends</span> <span class="nc">SimpleSwingApplication</span> <span class="o">{</span>
</pre></div></div></div>
<div class="paragraph"><p>В першому рядку після <code>import</code> об'єкт <code>FirstSwingApp</code> наслідує від <code>scala.swing.SimpleSwingApplication</code>. Це застосування відрізняється від традиційних застосувань командного рядка, що може наслідувати від <code>scala.App</code>. Клас <code>SimpleSwingApplication</code> завжди визначає метод <code>main</code>, що містить деякий код встановлення для фреймворку Java Swing. Потім метод <code>main</code> обробляє виклик до метода <code>top</code>, який ви надаєте:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">top</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MainFrame</span> <span class="o">{</span>
</pre></div></div></div>
<div class="paragraph"><p>Наступний рядок реалізує метод <code>top</code>. Цей метод містить код, що визначає ваш високорівневий GUI компонент. Це зазвичай деякий різновид <code>Frame</code> — тобто вікно, що може містити довільні дані.</p></div>
<div class="paragraph"><p>В Лістингу 34.1 ми обрали <code>MainFrame</code> в якості високорівневого компонента. <code>MainFrame</code> такий самий, як звичайний Swing <code>Frame</code>, за тим винятком, що його закриття також буде зачиняти ціле GUI застосування.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="k">=</span> <span class="s">&quot;First Swing App&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>Фрейми мають декілька атрибутів. Два з найбільш важливих є заголовок фрейма, ща з'явиться в рядку заголовка, та його вміст, що буде відображений в самому вікні. В Scala Swing API такі атрибути моделюються як властивсоті. Ви знаєте з Розділу 18.2, що пластивості в Scala закодовані як пари методів геттера та сеттера. Наприклад, властивість <code>title</code> об'єкта <code>Frame</code> моделюється як метод геттера:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">title</span><span class="k">:</span> <span class="kt">String</span>
</pre></div></div></div>
<div class="paragraph"><p>та метод сеттера:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">title_=</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Це той самий метод, що буде викликаний присвоєнням до <code>title</code> вище. Ефект від присвоєння в тому, що обраний заголовок буде показаний в рядку заголовка вікна. Якщо ви не вкажете його, вікно матиме порожній заголовок.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Button</span> <span class="o">{</span>
</pre></div></div></div>
<div class="paragraph"><p>Фрейм вищого рівня є кореневим компонентом Swing застосування. Це <code>Container</code>, що означає, що наступні помпоненти будуть визначені в ньому. Кожний Swing контейнер має властивість <code>contents</code>, що дозволяє вам отримати та встановити компоненти, які містить контейнер. Геттер <code>contents</code> на цій властивості має тип <code>Seq[Component]</code>, що вказує, що компонент може в загальному випадку мати декілька об'єктів в якості вмісту. Однак фрейми завжди мають тільки один компонент в якості <code>contents</code>. Цей компонент встановлюється та потенційно змінюється з використанням сеттеа <code>contents_=</code>. Наприклад, в Лістингу 34.1 один <code>Button</code> складає <code>contents</code> фрейма <code>top</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Click me&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>Кнопка також отримує заголовок, в цьому випадку <code>"Click me"</code>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_34_2___">34.2 Панелі та розташування</h2>
<div class="sectionbody">
<div class="paragraph"><p>Як наступний крок ми додамо деякий текст як другий компонент до фрейма <code>top</code> нашого застосування. Ліва частина Малюнка 34.2 показує, як має виглядати наше застосування.</p></div>
<div class="paragraph"><p>Малюнок 34.2 - Реактивне Swing застосування: початкове (зліва) та після натискання (зправа).</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.swing._</span>

<span class="k">object</span> <span class="nc">SecondSwingApp</span> <span class="k">extends</span> <span class="nc">SimpleSwingApplication</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">top</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MainFrame</span> <span class="o">{</span>
    <span class="n">title</span> <span class="k">=</span> <span class="s">&quot;Second Swing App&quot;</span>
    <span class="k">val</span> <span class="n">button</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Button</span> <span class="o">{</span>
      <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Click me&quot;</span>
    <span class="o">}</span>
    <span class="k">val</span> <span class="n">label</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span> <span class="o">{</span>
      <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;No button clicks registered&quot;</span>
    <span class="o">}</span>
    <span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BoxPanel</span><span class="o">(</span><span class="nc">Orientation</span><span class="o">.</span><span class="nc">Vertical</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">button</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">label</span>
      <span class="n">border</span> <span class="k">=</span> <span class="nc">Swing</span><span class="o">.</span><span class="nc">EmptyBorder</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 34.2 - Збірка компонентів на панелі.</p></div>
<div class="paragraph"><p>Ви бачили в останньому розділі, що фрейм містить рівно один дочірній компонент. Таким чином, щоб зробити фрейм з обома, кнопкою та міткою, вам треба створити інший компонент контейнера, що містить обоє. Ось для чого створені панелі. <code>Panel</code> є контейнером, що відображує всі компоненти, що він містить, відповідно до деяких фіксованих правил розташування. Є декілька різних розташувань, що реалізовані різними субкласами класу <code>Panel</code>, в диапазоні від простих до досить заплутаних. Фактично, одна зі складніших частин складного GUI застосування може бути отримання правильного розташування — непросто запропонувати дещо, що відображується досить гарно на всіх різновидах пристроїв для всіх розмірів вікна.</p></div>
<div class="paragraph"><p>Лістинг 34.2 показує повну реалізацію. В цьому класі два субкомпоненти фрейма <code>top</code> названі <code>button</code> та <code>label</code>. <code>button</code> визначений як раніше. Мітка <code>label</code> відображує текст, що не може бути редагований:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">label</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span> <span class="o">{</span>
  <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;No button clicks registered&quot;</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Код в Лістингу 34.2 обирає просте вертикальне розташування, коли компоненти покладені один на інший в <code>BoxPanel</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BoxPanel</span><span class="o">(</span><span class="nc">Orientation</span><span class="o">.</span><span class="nc">Vertical</span><span class="o">)</span> <span class="o">{</span>
</pre></div></div></div>
<div class="paragraph"><p>Властивість <code>contents</code> для <code>BoxPanel</code> є (спочатку порожнім) буфером, до якого елементи <code>button</code> та <code>label</code> додані за допомогою оператора <code>+=</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">contents</span> <span class="o">+=</span> <span class="n">button</span>
<span class="n">contents</span> <span class="o">+=</span> <span class="n">label</span>
</pre></div></div></div>
<div class="paragraph"><p>Ми також додали границю кругом двох об'єктів, через присвоєння властивості <code>border</code> панелі:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">border</span> <span class="k">=</span> <span class="nc">Swing</span><span class="o">.</span><span class="nc">EmptyBorder</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Як і в випадку з іншими GUI компонентами, границі представлені об'єктами. <code>EmptyBorder</code> є методом фабрики в об'єкті Swing, що приймає чотири параметри, вказуючи ширину границі зверху, зправа, знизу та злівого боку об'єктів, які ми малюємо.</p></div>
<div class="paragraph"><p>Простий як є, цей приклад вже показав базовий спосіб структурувати GUI застосування. Воно побудоване з компонент, що є примірниками класів зі <code>scala.swing</code>, таких як <code>Frame</code>, <code>Panel</code>, <code>Label</code> або <code>Button</code>. Компоненти мають властивості, що можуть бути налаштовані з боку застосування. Компоненти панелі можеть містить декілька інших компонент в своїй властивості <code>contents</code>, так що кінець кінцем GUI застосування складаються з дерева компонент.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_34_3__">34.3 Обробка подій</h2>
<div class="sectionbody">
<div class="paragraph"><p>З іншого боку застосуванню все ще бракую базової властивості. Якщо ви виконаєте код з Лістинга 34.2, та клацнете на кнопці, нічого не станеться. Фактично, застосування повністю статичне; воно не реагує в жодний спосіб на події користувача, за винятком кнопки закриття фрейма <code>top</code>, що завершує застосування. Як наступний крок, ми покращимо застосування, так що воно відображатиме разом кнопку та мітку, що вказує, як часто натискається кнопка. Права частина Малюнка 34.2 містить знімок екрану, де зображено як виглядатиме застосування після натискання кнопки.</p></div>
<div class="paragraph"><p>Щоб досягти цієї поведінки, вам треба під'єднати користувацьку подію (натискання кнопки) з дією (відображення оновленої мітки). Java та Scala мають фундаментально однаковий підхід "публікації/підписки" до обробки подій: компоненти можуть бути паблішерами та/або підписчиками. Паблішер публікує події. Підписчик підписується на паблішері для отримання повідомлень щодо любих опублікованих подій. Паблішери також називають "джерелами подій", та підписчики також називають "слухачами подій". Наприклад, <code>Button</code> є джерелом подій,що публікує подію, <code>ButtonClicked</code>, вказуючи, що кнопка була натиснута.</p></div>
<div class="paragraph"><p>В Scala підписка на джерело подій <code>source</code> робиться викликом <code>listenTo(source)</code>. Є також шлях відписатись від подій від <code>source</code> використовуючи <code>deafTo(source)</code>. В поточному прикладі застосування перша річ, що треба зробити, це зробити щоб фрейм <code>top</code> слухав на своїй кнопці, так що він отримуватиме повідомлення щодо подій на кнопці. Щоб зробити це, вам треба додати наступний виклик до тіла фрейма <code>top</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">listenTo</span><span class="o">(</span><span class="n">button</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Бути повідомленим про події є тільки частиною справи; друга частина є їх обробка. Ось де фреймворк Scala Swing найбільш відрізняється від (та радикально простіший за) Java Swing API. В Java сигнал події означає виклик метода <code>notify</code> об'єкта, що реалізує деякий інтерфейс <code>Listener</code>. Зазвичай це включає гарну порцію перенаправлень та шаблонного коду, що робить застосування з обробкою подій складними для написання та читання. Для контрасту, в Scala, подія є реальним об'єктом, що надсилається до підписаних компонент, що більше схоже на те, як повідомлення надсилаються до акторів. Наприклад, натискання кнопки буде створювати подію, що є примірником наступного кейс класу:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">ButtonClicked</span><span class="o">(</span><span class="n">source</span><span class="k">:</span> <span class="kt">Button</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Параметр кейс класу посилається на кнопку, що буна натиснута. Як з усіма іншими подіями Scala Swing, цей клас події міститься в пакунку з назвою <code>scala.swing.event</code>.</p></div>
<div class="paragraph"><p>Щоб ваш компонент реагував на входящі події, вам треба додати обробник до властивості з назвою <code>reactions</code>. Ось код, який робить це:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">var</span> <span class="n">nClicks</span> <span class="k">=</span> <span class="mi">0</span>
<span class="n">reactions</span> <span class="o">+=</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">ButtonClicked</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="k">=&gt;</span>
  <span class="n">nClicks</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Number of button clicks: &quot;</span> <span class="o">+</span> <span class="n">nClicks</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Перший рядок вище визначає змінну <code>nClicks</code>, що містить число раз, скільки кнопка була натиснута. Решта рядків додають код між фігурними дужками як обробник до властивості <code>reactions</code> фрейма <code>top</code>. Обробники є функціями, визначеними через порівняння шаблонів на подіях, більше схоже як Akka актор в методі <code>receive</code>, визначеному через порівняння на повідомленнях. Обробник вище порівнює події в формі <code>ButtonClicked(b)</code>, тобто любі події, що є примірником класу <code>ButtonClicked</code>. Змінна шаблону <code>b</code> посилається на справжню кнопку, що була натиснута. Дія, що відповідає до цієї події в коді вище, збільшує <code>nClicks</code>, та оновлює текст мітки.</p></div>
<div class="paragraph"><p>Загалом, обробник є <code>PartialFunction</code>, що співпадає на подіях, та виконує деякі дії. Також можливо порівняти на більше ніж одному різновиді подій в одному обробнику з декількома <code>case</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.swing._</span>
<span class="k">import</span> <span class="nn">scala.swing.event._</span>

<span class="k">object</span> <span class="nc">ReactiveSwingApp</span> <span class="k">extends</span> <span class="nc">SimpleSwingApplication</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">top</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MainFrame</span> <span class="o">{</span>
    <span class="n">title</span> <span class="k">=</span> <span class="s">&quot;Reactive Swing App&quot;</span>
    <span class="k">val</span> <span class="n">button</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Button</span> <span class="o">{</span>
      <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Click me&quot;</span>
    <span class="o">}</span>
    <span class="k">val</span> <span class="n">label</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span> <span class="o">{</span>
      <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;No button clicks registered&quot;</span>
    <span class="o">}</span>
    <span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BoxPanel</span><span class="o">(</span><span class="nc">Orientation</span><span class="o">.</span><span class="nc">Vertical</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">button</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">label</span>
      <span class="n">border</span> <span class="k">=</span> <span class="nc">Swing</span><span class="o">.</span><span class="nc">EmptyBorder</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">listenTo</span><span class="o">(</span><span class="n">button</span><span class="o">)</span>
    <span class="k">var</span> <span class="n">nClicks</span> <span class="k">=</span> <span class="mi">0</span>
    <span class="n">reactions</span> <span class="o">+=</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">ButtonClicked</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="n">nClicks</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="k">=</span> <span class="s">&quot;Number of button clicks: &quot;</span> <span class="o">+</span> <span class="n">nClicks</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 34.3 - Реалізація реактивного Swing застосування.</p></div>
<div class="paragraph"><p>Властивість <code>reactions</code> реалізує колекцію, так само, як робить властивість <code>contents</code>. Деякі компоненти приходять з передвизначеними реакціями. Наприклад, <code>Frame</code> має передвизначену реакцію, що закриє фрейм, якщо користувач натисне кнопку закриття в заголовку. Якщо ви встановите ваші власні реакції через додавання за допомогою <code>+=</code> до властивості <code>reactions</code>, реакції, що ви встановите, будуть розглядатись як додаток до стандартних. Концептуально, обробники, встановлені в <code>reactions</code>, формують стек. В цьому прикладі, якщо фрейм <code>top</code> отримує повідомлення, перший обробник, що буде спробуваний, буде той, що співпадає на <code>ButtonClicked</code>, оскільки він був останнім обробником, встановленим для фрейма. Якщо отримана подія має тип <code>ButtonClicked</code>, код, асоційований з шаблоном, буде викликаний. Після того, як цей код буде завершений, система буде шукати серед подальших обробників в стеку подій, що також можуть бути застосовані. Якщо отримана подія не має тип <code>ButtonClicked</code>, подія безпосередньо просувається до решти встановлених обробників. Також можливо видалити обробники з властивості <code>reactions</code> за допомогою оператора <code>-=</code>.</p></div>
<div class="paragraph"><p>Лістинг 34.3 показує завершене застосування, включаючи реакції. Код ілюструє основні елементи GUI застосування в фреймворці Scala Swing: застосування складається з дерева компонент, починаючи з фрейма <code>top</code>. Компоненти, показані в коді: <code>Frame</code>, <code>BoxPanel</code>, <code>Button</code>, <code>Label</code>, але є багато інших різновидів компонент, визначених в бібліотеках Swing. Кожний компонент налаштований через встановлення атрибутів. Два важливі атрибути це <code>contents</code>, що визначає дочірні компоненти в дереві, та <code>reactions</code>, що визначає, як компонент реагує на події.</p></div>
<div class="paragraph"><p>Малюнок 34.3 - Конвертор між градусами Цельсія та Фаренгейта.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">swing._</span>
<span class="k">import</span> <span class="nn">event._</span>

<span class="k">object</span> <span class="nc">TempConverter</span> <span class="k">extends</span> <span class="nc">SimpleSwingApplication</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">top</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MainFrame</span> <span class="o">{</span>
    <span class="n">title</span> <span class="k">=</span> <span class="s">&quot;Celsius/Fahrenheit Converter&quot;</span>
    <span class="k">object</span> <span class="nc">celsius</span> <span class="k">extends</span> <span class="nc">TextField</span> <span class="o">{</span> <span class="n">columns</span> <span class="k">=</span> <span class="mi">5</span> <span class="o">}</span>
    <span class="k">object</span> <span class="nc">fahrenheit</span> <span class="k">extends</span> <span class="nc">TextField</span> <span class="o">{</span> <span class="n">columns</span> <span class="k">=</span> <span class="mi">5</span> <span class="o">}</span>
    <span class="n">contents</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">FlowPanel</span> <span class="o">{</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">celsius</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot; Celsius = &quot;</span><span class="o">)</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="n">fahrenheit</span>
      <span class="n">contents</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot; Fahrenheit&quot;</span><span class="o">)</span>
      <span class="n">border</span> <span class="k">=</span> <span class="nc">Swing</span><span class="o">.</span><span class="nc">EmptyBorder</span><span class="o">(</span><span class="mi">15</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span>
      <span class="n">listenTo</span><span class="o">(</span><span class="n">celsius</span><span class="o">,</span> <span class="n">fahrenheit</span><span class="o">)</span>
      <span class="n">reactions</span> <span class="o">+=</span> <span class="o">{</span>
        <span class="k">case</span> <span class="nc">EditDone</span><span class="o">(</span><span class="n">`fahrenheit`</span><span class="o">)</span> <span class="k">=&gt;</span>
          <span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="n">fahrenheit</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">toInt</span>
          <span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="o">(</span><span class="n">f</span> <span class="o">-</span> <span class="mi">32</span><span class="o">)</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">9</span>
          <span class="n">celsius</span><span class="o">.</span><span class="n">text</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">toString</span>
        <span class="k">case</span> <span class="nc">EditDone</span><span class="o">(</span><span class="n">`celsius`</span><span class="o">)</span> <span class="k">=&gt;</span>
          <span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">celsius</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">toInt</span>
          <span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="n">c</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">/</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">32</span>
          <span class="n">fahrenheit</span><span class="o">.</span><span class="n">text</span> <span class="k">=</span> <span class="n">f</span><span class="o">.</span><span class="n">toString</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 34.4 - Реалізація конвертора температури.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_34_4____">34.4 Приклад: конвертор Цельсій/Фаренгейт</h2>
<div class="sectionbody">
<div class="paragraph"><p>Як інший приклад, ми напишемо GUI програму, що конвертує між градусами температури в Цельсіях та Фаренгейтах. Користувацький інтерфейс програми показаний на Малюнку 34.3. Він складається з двох полів (показані білими) з міткою, що стоїть за кожним. Одне текстове поле показує температуру в градусах Цельсія, інше в градусах Фаренгейта. Кожне з двох полів може бути відредаговане користувачем застосування. Як тільки користувач змінює температуру в полі, температура в іншому полі оновлюється автоматично.</p></div>
<div class="paragraph"><p>Лістинг 34.4 показує повний код, що реалізує це застосування. Імпорти зверху коду використовують скорочення:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">swing._</span>
<span class="k">import</span> <span class="nn">event._</span>
</pre></div></div></div>
<div class="paragraph"><p>Це фактично, еквівалентне до імпортів, що використовувались раніше:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.swing._</span>
<span class="k">import</span> <span class="nn">scala.swing.event._</span>
</pre></div></div></div>
<div class="paragraph"><p>Причина, з якої ви можете використовувати скорочення, в тому, що ці пакунки вкладені в Scala. Оскільки пакунок <code>scala.swing</code> міститься в пакунку <code>scala</code>, та все в цьому пакунку імпортоване автоматично, ви можете писати лише <code>swing</code> для посилання на пакунок. Подібно до цього, пакунки в <code>scala.swing.event</code> містяться як субпакунок <code>event</code> в пакунку <code>scala.swing</code>. Оскільки ви імпортували все в <code>scala.swing</code> в першому імпорті, ви можете посилатись на пакунок <code>event</code> просто як на <code>event</code>.</p></div>
<div class="paragraph"><p>Два компоненти, <code>celsius</code> та <code>fahrenheit</code>, в <code>TempConverter</code> є об'єкти класу <code>TextField</code>. <code>TextField</code> в Swing є компонент, що дозволяє вам редагувати єдиний рядок тексту. Він має довжину по замовчанню, що дається у властивості <code>columns</code>, обчисленої в символах (встановлене в 5 для обох полів).</p></div>
<div class="paragraph"><p>Вміст <code>TempConverter</code> зібраний в панель, що включає два текстових поля та дві мітки, що пояснюють, що таке ці поля. Панель класу <code>FlowPanel</code>, що означає, що вона відображує елементи один за одним, в один або більше рядків, в залежності від ширини фрейма.</p></div>
<div class="paragraph"><p><code>reactions</code> <code>TempConverter</code> визначені обробником, що містить два <code>case</code>. Кожний <code>case</code> співпадає з подією <code>EditDone</code> для одного з двох текстових полів. Така подія видається, коли текстове поле редагується користувачем. Зауважте форму шаблонів, що мають зворотні апострофи коло імен аргументів:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="nc">EditDone</span><span class="o">(</span><span class="n">`celsius`</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Як було пояснено в Розділі 15.2, ці апострофи коло <code>celsius</code> дають переконання, що шаблон співпаде тільки якщо джерелом події був об'єкт <code>celsius</code>. Якщо ви пропустили апостроф, та просто написали <code>case EditDone(celsius)</code>, шаблон буде співпадати з кожною подією класу <code>EditDone</code>. Змінене поле потім буде збережене в змінній шаблона <code>celsius</code>. Очевидно, це не те, що ви хочете. Альтернативно ви можете визначити два об'єкта <code>TextField</code>, що починаються з великої літери, тобто, <code>Celsius</code> та <code>Fahrenheit</code>. В такому випадку ви можете порівняти їх напряму, без апострофів, як <code>case EditDone(Celsius)</code>.</p></div>
<div class="paragraph"><p>Дві дії подій <code>EditDone</code> конвертують одні одиниці на інші. Кожне починається з читання вмісту модифікованого поля, та його перетворення на <code>Int</code>. До нього застосовується формула переводу температури з одних градусів в інші, та зберігання результата як рядка в іншому текстовому полі.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_34_5_">34.5 Висновок</h2>
<div class="sectionbody">
<div class="paragraph"><p>Ця глава надала вам перший присмак GUI програмування використовуючи Scala огортки для Swing фреймворку. Вона показала, як збирати GUI компоненти, як налаштовувати їх властивості, та як обробляти події. З причин вільного місця ми можемо обговорити тільки невелику кількість простих компонент. Існує значно більше різновидів компонент. Ви можете дізнатись про них через консультації з документацією Scala по пакунку <code>scala.swing</code>. Наступний розділ буде розробляти приклад більш складного Swing застосування.</p></div>
<div class="paragraph"><p>Існує також багато туторіалів по оригінальному фреймворку Java Swing,на якому базується огортка Scala.<span class="footnote"><br />[Дивіться, наприклад, The Java Tutorials. [Jav]]<br /></span> Огортки Scala повторюють підлеглі класи Swing, але намагаються де можливо спростити концепції, та зробити їх більш одноманітними. Спрощення екстенсивно використовує властивості мови Scala. Наприклад, емуляція властивостей в Scala та її перевантаження операторів дозволяє зручні визначення властивостей з використанням присвоєнь та операторів <code>+=</code>. Її філософія "все є об'єкт" робить можливим наслідувати метод <code>main</code> GUI застосування. Таким чином метод може бути прихований від користувацьких застосувань, включаючи шаблонний код для встановлення речей, що іде з цім. Нарешті, та більш важливо, першокласні функції Scala та порівняння шаблонів робить можливим формулювати обробку подій як властивсоті компонента <code>reactions</code>, що дуже спрощує життя розробника застосування.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2019-04-26 06:41:27 EEST
</div>
</div>
</body>
</html>
