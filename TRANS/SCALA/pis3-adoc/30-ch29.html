<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="__29">Глава 29</h2>
<div class="sectionbody">
</div>
</div>
<h1 id="______">Модулярне програмування з використанням об'єктів</h1>
<div class="paragraph"><p>В Главі 1 ми стверджували, що один зі способів, в який Scala є маштабованою мовою, це те, що ви можете використовувати ті самі прийоми для конструювання малих, так само як і великих програм. Досі в цій книзі ми в основному фокусувались на програмуванні в малому: розробленні та реалізації маліших програмних частин, з яких ви можете конструювати більші програми.
<span class="footnote"><br />[Ця термінологія була введена в творі DeRemer, et. al., "Programming - in - the - large versus programming - in - the - small." [DeR75]]<br /></span> Інша сторона історії є програмування в великому: організація та збирання менших частин в більші програми, застосування або системи. Ми торкались цього предмета, коли ми обговорювали пакунки та модифікатори доступу в Главі 13. Коротко кажучи, пакунки та модифікатори доступу дозволяють вам організувати великі програми, використовуючи пакунки як модулі, де модуль є "меньшою програмною частиною" з гарно визначеним інтерфейсом та прихованою реалізацією.</p></div>
<div class="paragraph"><p>В той час, коли поділення програм на пакунки завжди досить корисне, воно обмежене, оскільки воно не провадить методів для абстракції. Ви не можете переналаштувати пакунок в два способи в тій самій програмі, і ви не можете наслідувати між пакунками. Пакунок завжди включає один конкретний список компонент, і цей список фіксований, доки ви не зміните код.</p></div>
<div class="paragraph"><p>В цій главі ми обсудимо, як ви можете задіяти об'єктно орієнтовні можливості Scala, щоб зробити програму більш модулярною. Спочатку ми покажемо, як простий об'єкт синглтон може бути використаний як модуль. Потім ми покажемо, як ви можете використовувати трейти та класи для абстракцій в модулях. Ці абстракції можуть бути переконфігуровані в декілька модулів, навіть декілька разів в тій самій програмі. Нарешті, ми покажемо прагматичну техніку для використання трейтів для розподілу модуля по декільком файлам.</p></div>
<div class="sect1">
<h2 id="_29_1_">29.1 Проблема</h2>
<div class="sectionbody">
<div class="paragraph"><p>По мірі того, як програма зростає в розмірі, стає все більше важливим організувати її в модулярний спосіб. По перше, можливість окремо компілювати різні модулі, що складають систему, допомагає різним командам робити незалежно. На додаток, корисно мати змогу відмикати одну реалізацію модуля, та підмикати іншу, оскільки це дозволяє використовувати різні конфігурації системи в різних контекстах, таких, як юніт тестування на десктопі розробника, інтеграційні тести, тестова експлуатація та розгортання.</p></div>
<div class="paragraph"><p>Наприклад, ви можете мати застосування, що використовує базу даних та сервіс повідомлень. По мірі як ви пишете код, ви можете бажати виконувати юніт тести на вашому десктопі, що використовують фіктивні мок версії обох, бази даних та сервіса повідомлень, що симулює ці сервіси достатньо для тестування, без потреби розмовляти по мережі до загального ресурса. Протягом інтеграційного тестування ви можете побажати використовувати мок сервіс повідомлень, але живу базу даних. Під час тестової експлуатації, та напевне при розгортанні, ваша організація скоріше всього буде використовувати живі версії обох, бази даних та сервіс повідомлень.</p></div>
<div class="paragraph"><p>Люба техніка, що націлена на спрощення цього різновиду модульності потребує провадити декілька основних речей. Перше, має бути конструкція модуля, що провадить гарне розділення інтерфейса та реалізації. Друге, потрібен бути шлях заміняти один модуль на інший, що має той самий інтерфейс, без зміни або перекомпіляції модулів, що залежать від заміненого. Нарешті, повинен бути спосіб поєднувати модулі разом. Ця задача поєднання може розглядатись як конфігурація системи.</p></div>
<div class="paragraph"><p>Один підхід до вирішення цієї проблеми є ін'єкція залежностей, прийом, що підтримується на Java платформі фреймворками, як Spring та Guice, що популярні в корпоративній Java спільноті.<span class="footnote"><br />[Fowler, "Inversion of control containers and the dependency injection pattern." [Fow04]]<br /></span> Наприклад Spring в основному дозволяє вам презентувати інтерфейс модуля як Java інтерфейс, та реалізації модуля як Java класи. Ви можете задати залежності між модулями та "приєднати" застосування разом через зовнішній файл конфігурації XML. Хоча ви можете використовувати Spring зі Scala, і через це використовувати підхід Spring для досягнення модульності рівня системи ваших Scala програм, зі Scala ви маєте деякі альтернативи, доступні через саму мову. В залишку цієї глави ви покажемо, як використовувати об'єкти як модулі для бажаної модульності "в великому", без використання зовнішнього фреймворку.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_2__">29.2 Застосування рецепту</h2>
<div class="sectionbody">
<div class="paragraph"><p>Уявіть, що ви будуєте корпоративне веб застосування, що дозволить користувачам керувати рецептами. Ви бажаєте розбити програму на шари, включаючи прикладний шар та шар застосування. В прикладному шарі ви визначите прикладні об'єкти, що захоплять бізнес концепції та правила, так само як енкапсулюють стан, що буде збережений в зовнішній базі даних. В рівні застосування ви будете провадити API, організоване в термінах сервісів, які застосування пропонує клієнтам (включаючи рівень користувацького інтерфейсу). Рівень застосування буде реалізувати ці серсіси через координацію завдань та делегацію роботи до об'єктів прикладного домена.<span class="footnote"><br />[Іменування ціх шарів слідує таким в Evans, Domain-Driven Design. [Eva03]]<br /></span></p></div>
<div class="paragraph"><p>Ви бажаєте бути в змозі під'єднати реальну або мок версію на кожному з ціх рівнів, так що ви можете більш просто писати юніт тести для вашого застосування. Щоб досягти цієї цілі ви можете розглядати об'єкти, що ви бажаєте зробити мок, як модулі. В Scala немає потреби для об'єктів бути "малими" речами, немає потреби використовувати деякий інший різновид конструктора для "великих" речей, як модулі. Один зі шляхів, в який Scala є маштабованою мовою, є те, що ті самі конструкції використовуються для структур, однаково, малих та великих.</p></div>
<div class="paragraph"><p>Наприклад, оскільки одне з "речей", що ви бажаєте зробити мок на прикладному рівні, є об'єкт, що представляє реляційну базу даних, ви зробите його одним з модулей. На рівні застосування ви будете трактувати об'єкт "переглядач бази даних" як модуль. База даних буде містити всі рецепти, що людина буде збирати. Переглядач буде допомагати шукати та переглядати базу даних, наприклад, щоб знайти кожний рецепт, що включає інгредієнти, що у вас є в наявності.</p></div>
<div class="paragraph"><p>Перша річ, що треба зробити, є моделювання їжі та рецептів. Щоб утримувати речі простими, їжа буде мати лише назву, як показано в Лістингу 29.1. Рецепт буде мати ім'я, список інгредієнтів і деякі інструкції, як показано на Лістингу 29.2.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">org.stairwaybook.recipe</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">Food</span><span class="o">(</span><span class="k">val</span> <span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">toString</span> <span class="k">=</span> <span class="n">name</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.1 - Простий клас сутності <code>Food</code>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">org.stairwaybook.recipe</span>

<span class="k">class</span> <span class="nc">Recipe</span><span class="o">(</span>
  <span class="k">val</span> <span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span>
  <span class="k">val</span> <span class="n">ingredients</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">],</span>
  <span class="k">val</span> <span class="n">instructions</span><span class="k">:</span> <span class="kt">String</span>
<span class="o">)</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">toString</span> <span class="k">=</span> <span class="n">name</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.2 - Простий клас сутності <code>Recipe</code>.</p></div>
<div class="paragraph"><p>Класи <code>Food</code> та <code>Recipe</code>, показані в Лістингу 29.1 та 29.2, представляють сутності, що будуть представлені в базі даних.<span class="footnote"><br />[Ці класи сутностей спрощені, щоб не захаращувати приклад багатьма деталями реального світу. Але трансформація ціх класів в сутності, що можуть бути збережені за допомогою Hibernate або, наприклад, Java Persistence Architecture, буде потребувати тільки декількох модифікацій, таких як додавання поля <code>private Long id</code> та конструктора без аргументів, покладання анотацій <code>scala.reflect.BeanProperty</code> на поля, вказання відповідних відображень через анотації або окремий XML файл, і так далі.]<br /></span> Лістинг 29.3 показує деякі примірники синглтонів ціх класів, що можуть бути використані для написання тестів.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">org.stairwaybook.recipe</span>

<span class="k">object</span> <span class="nc">Apple</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;Apple&quot;</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Orange</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;Orange&quot;</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Cream</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;Cream&quot;</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Sugar</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;Sugar&quot;</span><span class="o">)</span>

<span class="k">object</span> <span class="nc">FruitSalad</span> <span class="k">extends</span> <span class="nc">Recipe</span><span class="o">(</span>
  <span class="s">&quot;fruit salad&quot;</span><span class="o">,</span>
  <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">,</span> <span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">),</span>
  <span class="s">&quot;Stir it all together.&quot;</span>
<span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.3 - Приклади <code>Food</code> та <code>Recipe</code> для використання в тестах.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">org.stairwaybook.recipe</span>

<span class="k">object</span> <span class="nc">SimpleDatabase</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">allFoods</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">,</span> <span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">foodNamed</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Food</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">allFoods</span><span class="o">.</span><span class="n">find</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">allRecipes</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FruitSalad</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">object</span> <span class="nc">SimpleBrowser</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">recipesUsing</span><span class="o">(</span><span class="n">food</span><span class="k">:</span> <span class="kt">Food</span><span class="o">)</span> <span class="k">=</span>
    <span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">allRecipes</span><span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">recipe</span> <span class="k">=&gt;</span>
      <span class="n">recipe</span><span class="o">.</span><span class="n">ingredients</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="n">food</span><span class="o">))</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.4 - Фіктивна база даних та модулі перегляду.</p></div>
<div class="paragraph"><p>Scala використовує об'єкти для модулів, так що ви можете почати модулізацію вашої програми зі створення двох синглтонів, що служитимуть як фіктивні мок реалізації бази даних та переглядача під час тестування. Оскільки це мок, модуль бази даних підтримується простим списком в пам'яті. Реалізації ціх об'єктів показані в Лістингу 29.4. Ви можете використовувати цю базу даних та переглядач наступним чином:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">apple</span> <span class="k">=</span> <span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">foodNamed</span><span class="o">(</span><span class="s">&quot;Apple&quot;</span><span class="o">).</span><span class="n">get</span>
<span class="n">apple</span><span class="k">:</span> <span class="kt">Food</span> <span class="o">=</span> <span class="nc">Apple</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">SimpleBrowser</span><span class="o">.</span><span class="n">recipesUsing</span><span class="o">(</span><span class="n">apple</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="n">fruit</span> <span class="n">salad</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб зробити речі трохи цікавішими, уявімо, що база даних сортує їжу по категоріях. Щоб реалізувати це, ви можете додати клас <code>FoodCategory</code>, та перерахувати всі категорії в базі даних, як показано в Лістингу 29.5. Зауважте в цьому прикладі ключове слово <code>private</code>, що корисне для реалізації класів, і також корисне для реалізації модулів. Елементи, що відмічені як приватні, є частиною реалізації модуля, і, таким чином, відносно прості для зміни без впливу на інші модулі.</p></div>
<div class="paragraph"><p>В цій точці можуть бути додані значно більше можливостей, але ви отримали ідею. Програми можуть бути поділені на об'єкти синглтони, про які ви можете думати як про модулі. Це не велика новина, але це стає дуже корисним, коли ви розглядатимете абстракції (про що ми скоро розповімо).</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">org.stairwaybook.recipe</span>

<span class="k">object</span> <span class="nc">SimpleDatabase</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">allFoods</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">,</span> <span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">foodNamed</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Food</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">allFoods</span><span class="o">.</span><span class="n">find</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">allRecipes</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FruitSalad</span><span class="o">)</span>

  <span class="k">case</span> <span class="k">class</span> <span class="nc">FoodCategory</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">foods</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">])</span>

  <span class="k">private</span> <span class="k">var</span> <span class="n">categories</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span>
    <span class="nc">FoodCategory</span><span class="o">(</span><span class="s">&quot;fruits&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">)),</span>
    <span class="nc">FoodCategory</span><span class="o">(</span><span class="s">&quot;misc&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">)))</span>

  <span class="k">def</span> <span class="n">allCategories</span> <span class="k">=</span> <span class="n">categories</span>
<span class="o">}</span>

<span class="k">object</span> <span class="nc">SimpleBrowser</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">recipesUsing</span><span class="o">(</span><span class="n">food</span><span class="k">:</span> <span class="kt">Food</span><span class="o">)</span> <span class="k">=</span>
    <span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">allRecipes</span><span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">recipe</span> <span class="k">=&gt;</span>
      <span class="n">recipe</span><span class="o">.</span><span class="n">ingredients</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="n">food</span><span class="o">))</span>

  <span class="k">def</span> <span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="k">:</span> <span class="kt">SimpleDatabase.FoodCategory</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.5 - Модулі бази даних та переглядача з доданими категоріями.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_3_">29.3 Абстракції</h2>
<div class="sectionbody">
<div class="paragraph"><p>Хоча приклади, показані дотепер, керували розбиттям вашого застосування на окремі модулі бази даних та переглядача, досі дизай не дуже "модулярний". Проблема в тому, що існує "жорсткий зв'язок" від модуля переглядача до модуля бази даних:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">allRecipes</span><span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">recipe</span> <span class="k">=&gt;</span> <span class="o">...</span>
</pre></div></div></div>
<div class="paragraph"><p>Оскільки модуль <code>SimpleBrowser</code> споминає модуль <code>SimpleDatabase</code> за ім'ям, ви не будете в змозі під'єднати іншу реалізацію модуля бази даних, без модифікації та перекомпіляції модуля переглядача. На додаток, хоча немає жорсткого посилання від модуля <code>SimpleDatabase</code> до модуля <code>SimpleBrowser</code>,<span class="footnote"><br />[Це гарно, бо кожний з ціх архитектурних шарів повинен залежати тільки від шарів під ним.]<br /></span> немає ясного спосібу дозволити шару користувацького інтерфейсу, наприклад, бути сконфігурованим для використання інших реалізацій модуля переглядача.</p></div>
<div class="paragraph"><p>Однак, коли робити ці модулі більш підключуваними, важливо уникати дублікації кода, оскільки більшість коду з вірогідністю може бути поширений між різними реалізаціями того самого модуля. Наприклад уявімо, що ви бажаєте, щоб та сама кодова база підтримувала декілька баз даних рецептів. Ви скоріше всього захочете використати код переглядача для кожного з примірників, оскільки тільки одна річ, що буде відрізняться в переглядачах, це база даних, на яку вони посилаються. За винятком реалізації бази даних, решта коду може бути використана повторно, символ до символа. Як аранжувати програму, щоб зменшити повторення коду? Як код можна зробити конфігурованим, так що ви б могли конфігурувати його з використанням любої реалізації бази даних?</p></div>
<div class="paragraph"><p>Відповідь знайома: якщо модуль є об'єктом, тоді шаблоном для модуля є клас. Точно так, як клас описує загальні частини всіх своїх примірників, клас може описувати частину модуля, що є загальною для всіх можливих конфігурацій.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Browser</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">database</span><span class="k">:</span> <span class="kt">Database</span>

  <span class="k">def</span> <span class="n">recipesUsing</span><span class="o">(</span><span class="n">food</span><span class="k">:</span> <span class="kt">Food</span><span class="o">)</span> <span class="k">=</span>
    <span class="n">database</span><span class="o">.</span><span class="n">allRecipes</span><span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">recipe</span> <span class="k">=&gt;</span>
      <span class="n">recipe</span><span class="o">.</span><span class="n">ingredients</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="n">food</span><span class="o">))</span>

  <span class="k">def</span> <span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="k">:</span> <span class="kt">database.FoodCategory</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг29.6 - Клас <code>Browser</code> з абстрактною <code>val</code> бази даних.</p></div>
<div class="paragraph"><p>Визначення переглядача таким чином перетворюєтья на клас, замість об'єкта, та база даних для користування задається як абстрактний член класу, як показано в Лістингу 29.6. База даних також стає класом, що включає стільки, як це можливо, загального для всіх баз даних,та декларує відсутні частини, які має визначити база даних. В цьому випадку всі модулі бази даних мають визначати методи для <code>allFoods</code>, <code>allRecipes</code> та <code>allCategories</code>, оле оскільки вони можуть використовувати довільне визначення, методи мають бути залишені абстрактними в класі <code>Database</code>. Для контрасту, метод <code>foodNamed`може бути визначений в абстрактному класі `Database</code>, як показано в Лістингу 29.7.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Database</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">allFoods</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">allRecipes</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">foodNamed</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span>
    <span class="n">allFoods</span><span class="o">.</span><span class="n">find</span><span class="o">(</span><span class="n">f</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">)</span>

  <span class="k">case</span> <span class="k">class</span> <span class="nc">FoodCategory</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">foods</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">])</span>
  <span class="k">def</span> <span class="n">allCategories</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">FoodCategory</span><span class="o">]}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.7 - Клас <code>Database</code> з абстрактними методами.</p></div>
<div class="paragraph"><p>Об'єкт <code>SimpleDatabase</code> має бути оновлений для наслідування від абстрактного класу <code>Database</code>, як показано в Лістингу 29.8.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">SimpleDatabase</span> <span class="k">extends</span> <span class="nc">Database</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">allFoods</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">,</span> <span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">allRecipes</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FruitSalad</span><span class="o">)</span>

  <span class="k">private</span> <span class="k">var</span> <span class="n">categories</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span>
    <span class="nc">FoodCategory</span><span class="o">(</span><span class="s">&quot;fruits&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Orange</span><span class="o">)),</span>
    <span class="nc">FoodCategory</span><span class="o">(</span><span class="s">&quot;misc&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Cream</span><span class="o">,</span> <span class="nc">Sugar</span><span class="o">)))</span>

  <span class="k">def</span> <span class="n">allCategories</span> <span class="k">=</span> <span class="n">categories</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.8 - Об'єкт <code>SimpleDatabase</code> як субклас <code>Database</code>.</p></div>
<div class="paragraph"><p>Тепер окремий модуль переглядача, отриманий як примірник класу <code>Browser</code>, вказує, яку базу даних використовувати, як показано в Лістингу 29.9.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">SimpleBrowser</span> <span class="k">extends</span> <span class="nc">Browser</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">database</span> <span class="k">=</span> <span class="nc">SimpleDatabase</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.9 - Об'єкт <code>SimpleBrowser</code> як субклас <code>Browser</code>.</p></div>
<div class="paragraph"><p>Ви можете використовувати ці більш підключувані модулі так само, як раніше:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">apple</span> <span class="k">=</span> <span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">foodNamed</span><span class="o">(</span><span class="s">&quot;Apple&quot;</span><span class="o">).</span><span class="n">get</span>
<span class="n">apple</span><span class="k">:</span> <span class="kt">Food</span> <span class="o">=</span> <span class="nc">Apple</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">SimpleBrowser</span><span class="o">.</span><span class="n">recipesUsing</span><span class="o">(</span><span class="n">apple</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="n">fruit</span> <span class="n">salad</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Однак тепер ви можете створити другу мок базу даних, та використовувати з нею той самий клас переглядача, як показано в Лістингу 29.10:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">StudentDatabase</span> <span class="k">extends</span> <span class="nc">Database</span> <span class="o">{</span>
  <span class="k">object</span> <span class="nc">FrozenFood</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;FrozenFood&quot;</span><span class="o">)</span>

  <span class="k">object</span> <span class="nc">HeatItUp</span> <span class="k">extends</span> <span class="nc">Recipe</span><span class="o">(</span>
    <span class="s">&quot;heat it up&quot;</span><span class="o">,</span>
    <span class="nc">List</span><span class="o">(</span><span class="nc">FrozenFood</span><span class="o">),</span>
    <span class="s">&quot;Microwave the &#39;food&#39; for 10 minutes.&quot;</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">allFoods</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FrozenFood</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">allRecipes</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">HeatItUp</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">allCategories</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span>
    <span class="nc">FoodCategory</span><span class="o">(</span><span class="s">&quot;edible&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FrozenFood</span><span class="o">)))</span>
<span class="o">}</span>

<span class="k">object</span> <span class="nc">StudentBrowser</span> <span class="k">extends</span> <span class="nc">Browser</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">database</span> <span class="k">=</span> <span class="nc">StudentDatabase</span><span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.10 - Студентська база даних та переглядач.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_4____">29.4 Поділ модулей на трейти</h2>
<div class="sectionbody">
<div class="paragraph"><p>Часто модуль дуже великий, щоб комфортабельно міститись в одному файлі. Коли це трапляється, ви можете використовувати трейти для поділу модуля на окремі файли. Наприклад, уявімо, що ви бажаєте перенести код категоризації з головного файлу <code>Database</code> до свого власного. Ви можете створити трейт для кода, як показано в Лістингу 29.11.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">FoodCategories</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">FoodCategory</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">foods</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">])</span>
  <span class="k">def</span> <span class="n">allCategories</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">FoodCategory</span><span class="o">]</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.11 - Трейт для категорій їжі.</p></div>
<div class="paragraph"><p>Тепер клас <code>Database</code> може міксувати трейт <code>FoodCategories</code> замість визначення <code>FoodCategory</code> та <code>allCategories</code> самому, як показано в Лістингу 29.12:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Database</span> <span class="k">extends</span> <span class="nc">FoodCategories</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">allFoods</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Food</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">allRecipes</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Recipe</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">foodNamed</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span>
    <span class="n">allFoods</span><span class="o">.</span><span class="n">find</span><span class="o">(</span><span class="n">f</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="o">)</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.12 - Клас <code>Database</code>, що міксує трейт <code>FoodCategories</code>.</p></div>
<div class="paragraph"><p>Ви можете спробувати, та поділити <code>SimpleDatabase</code> на два трейти, один для їжі, та один для рецептів. Це дозволить вам визначити <code>SimpleDatabase</code>, як показано в Лістингу 29.13:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">SimpleDatabase</span> <span class="k">extends</span> <span class="nc">Database</span>
  <span class="k">with</span> <span class="nc">SimpleFoods</span> <span class="k">with</span> <span class="nc">SimpleRecipes</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.13 - Об'єкт <code>SimpleDatabase</code>, повністю складений з міксінів.</p></div>
<div class="paragraph"><p>Трейт <code>SimpleFoods</code> може виглядати як показано в Лістингу 29.14:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">SimpleFoods</span> <span class="o">{</span>
  <span class="k">object</span> <span class="nc">Pear</span> <span class="k">extends</span> <span class="nc">Food</span><span class="o">(</span><span class="s">&quot;Pear&quot;</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">allFoods</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Pear</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">allCategories</span> <span class="k">=</span> <span class="nc">Nil</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.14 - Трейт <code>SimpleFoods</code>.</p></div>
<div class="paragraph"><p>Доки все добре, але нажаль постає проблема, якщо ви спробуєте визначити трейт <code>SimpleRecipes</code>, ось так:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">SimpleRecipes</span> <span class="o">{</span> <span class="c1">// Не компілюється</span>
  <span class="k">object</span> <span class="nc">FruitSalad</span> <span class="k">extends</span> <span class="nc">Recipe</span><span class="o">(</span>
    <span class="s">&quot;fruit salad&quot;</span><span class="o">,</span>
    <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Pear</span><span class="o">),</span> <span class="c1">// Uh oh</span>
    <span class="s">&quot;Mix it all together.&quot;</span>
  <span class="o">)</span>

  <span class="k">def</span> <span class="n">allRecipes</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FruitSalad</span><span class="o">)</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Проблема в тому, що <code>Pear</code> розміщений в іншому трейті, відносно того, який його використовує, так що він за полем зору. Компілятор не має уяви, що <code>SimpleRecipes</code> ще колись буде зміксований з <code>SimpleFoods</code>.</p></div>
<div class="paragraph"><p>Однак є спосіб, як ви можете сказати це компілятору. Scala провадить тип <code>self</code> саме для цієї ситуації. Технічно тип <code>self</code> є очікуваний тип для <code>this</code>, кожного разу коли <code>this</code> споминається в класі. Прагматично тип <code>self</code> вказує вимоги на кожному конкретному класі, до якого міксується цей трейт. Якщо ви маєте трейт, який використовується тільки тоді, коли міксується з іншим трейтом або трейтами, тоді ви маєте вказати, що ці інші трейти повинно мати на увазі. В цьому випадку досить задати тип <code>self</code> для <code>SimpleFoods</code>, як показано в Лістингу 29.15:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">SimpleRecipes</span> <span class="o">{</span>
  <span class="k">this:</span> <span class="kt">SimpleFoods</span> <span class="o">=&gt;</span>

  <span class="k">object</span> <span class="nc">FruitSalad</span> <span class="k">extends</span> <span class="nc">Recipe</span><span class="o">(</span>
    <span class="s">&quot;fruit salad&quot;</span><span class="o">,</span>
    <span class="nc">List</span><span class="o">(</span><span class="nc">Apple</span><span class="o">,</span> <span class="nc">Pear</span><span class="o">),</span> <span class="c1">// Now Pear is in scope</span>
    <span class="s">&quot;Mix it all together.&quot;</span>
  <span class="o">)</span>
  <span class="k">def</span> <span class="n">allRecipes</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">FruitSalad</span><span class="o">)</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.15 - Трейт <code>SimpleRecipes</code> з типом <code>self</code>.</p></div>
<div class="paragraph"><p>Маючи цей новий тип <code>self</code>, <code>Pear</code> тепер доступний. Неявно посилання до <code>Pear</code> іде як <code>this.Pear</code>. Це безпечно, бо любий суцільний клас, що міксує <code>SimpleRecipes</code>, також має бути субтипом <code>SimpleFoods</code>, що означає, що <code>Pear</code> буде членом. Абстрактні субкласи та трейти не мають слідувати цьому обмеженню, але оскільки вони не можуть утворити примірники за допомогою <code>new</code>, немає ризику, що посилання <code>this.Pear</code> схибить.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_5____">29.5 Зв'язування часу виконання</h2>
<div class="sectionbody">
<div class="paragraph"><p>Модулі Scala можуть бути зв'язані разом під час виконання, та ви можете обрати, які модулі будуть зв'язуваться з якими, в залежності від обчислень часу виконання. Наприклад, Лістинг 29.16 показує малу програму, що обирає базу даних під час виконання, і потім роздруковує всі яблучні рецепти в ній:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">GotApples</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">db</span><span class="k">:</span> <span class="kt">Database</span> <span class="o">=</span>
      <span class="k">if</span><span class="o">(</span><span class="n">args</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="s">&quot;student&quot;</span><span class="o">)</span>
        <span class="nc">StudentDatabase</span>
      <span class="k">else</span>
        <span class="nc">SimpleDatabase</span>

  <span class="k">object</span> <span class="nc">browser</span> <span class="k">extends</span> <span class="nc">Browser</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">database</span> <span class="k">=</span> <span class="n">db</span>
  <span class="o">}</span>

  <span class="k">val</span> <span class="n">apple</span> <span class="k">=</span> <span class="nc">SimpleDatabase</span><span class="o">.</span><span class="n">foodNamed</span><span class="o">(</span><span class="s">&quot;Apple&quot;</span><span class="o">).</span><span class="n">get</span>

  <span class="k">for</span><span class="o">(</span><span class="n">recipe</span> <span class="k">&lt;-</span> <span class="n">browser</span><span class="o">.</span><span class="n">recipesUsing</span><span class="o">(</span><span class="n">apple</span><span class="o">))</span>
    <span class="n">println</span><span class="o">(</span><span class="n">recipe</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.16 - Застосування, що динамічно обирає реалізацію модуля.</p></div>
<div class="paragraph"><p>Тепер, якщо ви використовуєте базу даних <code>simple</code>, ви знайдете рецепт для фруктового салату. Якщо ви використовуєте базу даних <code>student</code>, ви взагалі не знайдете рецептів з використанням яблук:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">$</span> <span class="n">scala</span> <span class="nc">GotApples</span> <span class="n">simple</span>
<span class="n">fruit</span> <span class="n">salad</span>
<span class="n">$</span> <span class="n">scala</span> <span class="nc">GotApples</span> <span class="n">student</span>
<span class="n">$</span>
</pre></div></div></div>
</div>
</div>
<div class="sect1">
<h2 id="____scala_">Конфігураця за допомогою Scala кода</h2>
<div class="sectionbody">
<div class="paragraph"><p>Ви можете здивуватись, чи ви не зповзли до проблеми жорстких посилань оригінальних прикладів в цій главі, оскільки об'єкт <code>GotApples</code>, показаний в Лістингу 29.16, містить жорсткі посилання на обох, <code>StudentDatabase</code> та <code>SimpleDatabase</code>. Тут різниця в тому, що жорсткі посилання локалізовані в одному файлі, що може бути замінений.</p></div>
<div class="paragraph"><p>Кожне модулярне застосування потребує деякий спосіб вказати дійсну реалізацію модуля, що треба використовувати в певній ситуації. Ця дія "конфігурації" застосування буде по визначенню включати іменування конкретинх реалізацій модуля. Наприклад, в застосуванні Spring ви конфігуруєте через назву реалізацій в зовнішньому файлі XML. В Scala ви можете сконфігурувати через сам код Scala. Перевага використання джерела Scala над XML для конфігурації в тому, що процес виконання вашого файла конфігурації через компілятор Scala викриє любі помилки набору перед його дійсним застосуванням.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_6___">29.6 Відстеження примірників модуля</h2>
<div class="sectionbody">
<div class="paragraph"><p>Крім використання того самого кода, різні модулі переглядача та бази даних, створені в попередньому розділі, насправді розділяють модулі. Це означає, що кожний модуль має свій власний вміст, включаючи любі вкладені класи. <code>FoodCategory</code> в <code>SimpleDatabase</code>, наприклад, інший клас від <code>FoodCategory</code> в <code>StudentDatabase</code>!</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">category</span> <span class="k">=</span> <span class="nc">StudentDatabase</span><span class="o">.</span><span class="n">allCategories</span><span class="o">.</span><span class="n">head</span>
<span class="n">category</span><span class="k">:</span> <span class="kt">StudentDatabase.FoodCategory</span> <span class="o">=</span>
<span class="nc">FoodCategory</span><span class="o">(</span><span class="n">edible</span><span class="o">,</span><span class="nc">List</span><span class="o">(</span><span class="nc">FrozenFood</span><span class="o">))</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">SimpleBrowser</span><span class="o">.</span><span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">21</span><span class="k">:</span> <span class="kt">error:</span> <span class="k">type</span> <span class="kt">mismatch</span><span class="o">;</span>
<span class="n">found</span>   <span class="k">:</span> <span class="kt">StudentDatabase.FoodCategory</span>
<span class="n">required</span><span class="k">:</span> <span class="kt">SimpleBrowser.database.FoodCategory</span>
          <span class="nc">SimpleBrowser</span><span class="o">.</span><span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
                                        <span class="o">^</span>
</pre></div></div></div>
<div class="paragraph"><p>Якщо замість цього ви бажаєте, щоб всі <code>FoodCategorys</code> були тими самими, ви можете досягти цього через перемііщення визначення <code>FoodCategory</code> за межі класу або трейта. Вибір за вами, але так як воно написане, кожна <code>Database</code> отримує свій власний, унікальний клас <code>FoodCategory</code>.</p></div>
<div class="paragraph"><p>Оскільки два класи <code>FoodCategory</code>, показані в цьому прикладі, насправді різні, компілятов був правий, коли скаржився. Однак іноді ви можете натрапити на випадок, коли два типа такі ж самі, але компілятор не може верифікувати їх. Ви будете бачити, що компілятор скаржиться, що два типи не однакові, однак ви, як програміст, знаеєте що це так.</p></div>
<div class="paragraph"><p>В таких випадках ви можете часто полагодити проблему з використанням типів синглтонів. Наприклад, в програмі <code>GotApples</code> перевірка типів не знає, що <code>db</code> та <code>browser.database</code> такі ж самі. Це спричинить помилку типу, якщо ви спробуєте передати категорії між двома об'єктами:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">GotApples</span> <span class="o">{</span>
  <span class="c1">// таке саме визначення...</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">category</span> <span class="k">&lt;-</span> <span class="n">db</span><span class="o">.</span><span class="n">allCategories</span><span class="o">)</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
<span class="c1">// ...</span>
<span class="o">}</span>
<span class="nc">GotApples2</span><span class="o">.</span><span class="n">scala</span><span class="k">:</span><span class="err">14</span><span class="kt">:</span> <span class="kt">error:</span> <span class="k">type</span> <span class="kt">mismatch</span><span class="o">;</span>
<span class="n">found</span>   <span class="k">:</span> <span class="kt">db.FoodCategory</span>
<span class="n">required</span><span class="k">:</span> <span class="kt">browser.database.FoodCategory</span>
      <span class="n">browser</span><span class="o">.</span><span class="n">displayCategory</span><span class="o">(</span><span class="n">category</span><span class="o">)</span>
                              <span class="o">^</span>
<span class="n">one</span> <span class="n">error</span> <span class="n">found</span>
</pre></div></div></div>
<div class="paragraph"><p>Щоб уникнути цієї помилки вам треба поінформувати перевірку типів, що вони є тим самим об'єктом. Ви можете зробити це, змінивши визначення <code>browser.database</code>, як показано в Лістингу 29.17:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">browser</span> <span class="k">extends</span> <span class="nc">Browser</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">database</span><span class="k">:</span> <span class="kt">db.</span><span class="k">type</span> <span class="o">=</span> <span class="n">db</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Лістинг 29.17 - Використання типу синглтону.</p></div>
<div class="paragraph"><p>Це визначення таке саме, як раніше, за винятком що <code>database</code> має дивно виглядаючий тип <code>db.type</code>. <code>.type</code> в кінці означає, що це тип синглтон. Тип синглтон екстремально специфічний, та має лише один об'єкт; в цьому випадку будь-який об'єкт, на який посилаєтся <code>db</code>. Звичайно такі типи дуже специфічні, щоб бути корисними, ось чому компілятор неохоче вставляє їх автоматично. Однак в цьому випадку тип синглтон дозволяє компілятору знати, що <code>db</code> та <code>browser.database</code> той самий об'єкт — досить інформації, щоб прибрати помилку типу.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_29_7_">29.7 Висновок</h2>
<div class="sectionbody">
<div class="paragraph"><p>Ця глава показала, як використовувати об'єкти Scala як модулі. На додаток до простих статичних модулів, цей підхід надає вам різні шляхі для створення абстрактних, переналаштовуваних модулів. Існує навіть більше прийомів абстрагування, ніж показано, оскільки будь-що, що робить для класа, також робить для класа, задіяного для реалізації модуля. Як завжди, скільки з цієї потужності ви задієте має бути справою смаку.</p></div>
<div class="paragraph"><p>Модулі є частиною програмування в великому, і, таким чином, з ними важко експериментувати. Вам треба велика програма, доки різниця дійсно стане помітною. Тим не менше, після читання цієї глави ви знаєте, про які можливості Scala слід згадати, коли ви бажаєте програмувати в модульному стилі. Думайте про ці прийоми, коли ви пишете ваші власні великі програми, та розпізнавайте ці шаблони прогрумавання, коли ви бачите їх в коді інших людей.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2019-04-15 03:48:33 EEST
</div>
</div>
</body>
</html>
